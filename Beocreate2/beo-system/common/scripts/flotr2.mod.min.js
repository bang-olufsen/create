/*!
  * bean.js - copyright Jacob Thornton 2011
  * https://github.com/fat/bean
  * MIT License
  * special thanks to:
  * dean edwards: http://dean.edwards.name/
  * dperini: https://github.com/dperini/nwevents
  * the entire mootools team: github.com/mootools/mootools-core
  *//*global module:true, define:true*/
  
!function(t,e,i){"undefined"!=typeof module?module.exports=i(t,e):"function"==typeof define&&"object"==typeof define.amd?define(i):e[t]=i(t,e)}("bean",this,function(t,e){function s(t,e){return l||e||t!==T&&t!==w?t:F}function u(e,i,o,n,s,a){return function(t){(n?n.apply(this,arguments):l||(t&&t.propertyName==="_on"+o||!t))&&(t=t&&E(t||((this.ownerDocument||this.document||this).parentWindow||w).event,a),i.apply(e,!t||s&&0!==s.length?O.call(arguments,t?0:1).concat(s):arguments))}}function p(t,e,i,o,n){return function(){t(e,i,n),o.apply(this,arguments)}}function d(t,e,i,o){var n,s,a,r=e&&e.replace(S,""),l=R.get(t,r,i);for(n=0,s=l.length;n<s;n++)l[n].inNamespaces(o)&&((a=l[n]).eventSupport&&_(a.target,a.eventType,a.handler,!1,a.type),R.del(a))}function g(t,e,i,o,n){var s,a,r,l,h=e.replace(S,""),c=e.replace(k,"").split(".");if(R.has(t,h,i))return t;"unload"===h&&(i=p(d,t,h,i,o)),P[h]&&(P[h].condition&&(i=u(t,i,h,P[h].condition,!0)),h=P[h].base||h),(s=R.put(new H(t,h,i,o,c[0]&&c))).handler=s.isNative?(a=t,r=s.handler,l=n,function(t){return t=E(t||((this.ownerDocument||this.document||this).parentWindow||w).event,!0),r.apply(a,[t].concat(l))}):u(t,s.handler,h,!1,n,!1),s.eventSupport&&_(s.target,s.eventType,s.handler,!0,s.customType)}var c,f,h,m,x,v,y,b,w=window,i=e[t],M=/over|out/,k=/[^\.]*(?=\..*)\.|.*/,S=/\..*/,n="addEventListener",a="attachEvent",r="detachEvent",T=document||{},F=T.documentElement||{},l=F[n],A=l?n:a,O=Array.prototype.slice,C=/click|mouse|menu|drag|drop/i,W=/^touch|^gesture/i,I={one:1},z=function(t,e,i){for(i=0;i<e.length;i++)t[e[i]]=1;return t}({},("click dblclick mouseup mousedown contextmenu mousewheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange error abort scroll "+(l?"show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend message readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ":"")).split(" ")),P={mouseenter:{base:"mouseover",condition:X},mouseleave:{base:"mouseout",condition:X},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}},E=(h="altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which".split(" "),m=h.concat("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" ")),x=h.concat("char charCode key keyCode".split(" ")),v=h.concat("touches targetTouches changedTouches scale rotation".split(" ")),y="preventDefault",b="stopPropagation",function(t,e){var i={originalEvent:t,isNative:e};if(!t)return i;var o,n,s,a,r=t.type,l=t.target||t.srcElement;return i[y]=(a=t,function(){a[y]?a[y]():a.returnValue=!1}),i[b]=(s=t,function(){s[b]?s[b]():s.cancelBubble=!0}),i.stop=(n=i,function(){n[y](),n[b](),n.stopped=!0}),i.target=l&&3===l.nodeType?l.parentNode:l,e&&(-1!==r.indexOf("key")?(o=x,i.keyCode=t.which||t.keyCode):C.test(r)?(o=m,i.rightClick=3===t.which||2===t.button,i.pos={x:0,y:0},t.pageX||t.pageY?(i.clientX=t.pageX,i.clientY=t.pageY):(t.clientX||t.clientY)&&(i.clientX=t.clientX+T.body.scrollLeft+F.scrollLeft,i.clientY=t.clientY+T.body.scrollTop+F.scrollTop),M.test(r)&&(i.relatedTarget=t.relatedTarget||t[("mouseover"===r?"from":"to")+"Element"])):W.test(r)&&(o=v),function(t,e,i){var o,n;for(o=i.length;o--;)!((n=i[o])in e)&&n in t&&(e[n]=t[n])}(t,i,o||h)),i}),H=(B.prototype={inNamespaces:function(t){var e,i;if(!t)return!0;if(!this.namespaces)return!1;for(e=t.length;e--;)for(i=this.namespaces.length;i--;)if(t[e]===this.namespaces[i])return!0;return!1},matches:function(t,e,i){return!(this.element!==t||e&&this.original!==e||i&&this.handler!==i)}},B),R=(c={},f=function(t,e,i,o,n){if(e&&"*"!==e){var s,a=0,r=c["$"+e],l="*"===t;if(!r)return;for(s=r.length;a<s;a++)if((l||r[a].matches(t,i,o))&&!n(r[a],r,a,e))return}else for(var h in c)"$"===h.charAt(0)&&f(t,h.substr(1),i,o,n)},{has:function(t,e,i){var o,n=c["$"+e];if(n)for(o=n.length;o--;)if(n[o].matches(t,i,null))return!0;return!1},get:function(t,e,i){var o=[];return f(t,e,i,null,function(t){return o.push(t)}),o},put:function(t){return(c["$"+t.type]||(c["$"+t.type]=[])).push(t),t},del:function(t){f(t.element,t.type,null,t.handler,function(t,e,i){return e.splice(i,1),0===e.length&&delete c["$"+t.type],!1})},entries:function(){var t,e=[];for(t in c)"$"===t.charAt(0)&&(e=e.concat(c[t]));return e}}),_=l?function(t,e,i,o){t[o?n:"removeEventListener"](e,i,!1)}:function(t,e,i,o,n){n&&o&&null===t["_on"+n]&&(t["_on"+n]=0),t[o?a:r]("on"+e,i)},D=function(t,e,i){var o,n,s,a,r=d,l=e&&"string"==typeof e;if(l&&0<e.indexOf(" ")){for(a=(e=e.split(" ")).length;a--;)D(t,e[a],i);return t}if((n=l&&e.replace(S,""))&&P[n]&&(n=P[n].type),!e||l)(s=l&&e.replace(k,""))&&(s=s.split(".")),r(t,n,i,s);else if("function"==typeof e)r(t,null,e);else for(o in e)e.hasOwnProperty(o)&&D(t,o,e[o]);return t},L=function(t,e,i,o,n){var s,a,r,l,h,c,u,d=i,f=i&&"string"==typeof i;if(e&&!i&&"object"==typeof e)for(s in e)e.hasOwnProperty(s)&&L.apply(this,[t,s,e[s]]);else for(l=3<arguments.length?O.call(arguments,3):[],a=(f?i:e).split(" "),f&&(h=e,c=d=o,u=n,i=function(t){var e,i,o="string"==typeof h?u(h,this):h;for(e=t.target;e&&e!==this;e=e.parentNode)for(i=o.length;i--;)if(o[i]===e)return c.apply(e,arguments)})&&(l=O.call(l,1)),this===I&&(i=p(D,t,e,i,d)),r=a.length;r--;)g(t,a[r],i,d,l);return t},N=l?function(t,e,i){var o=T.createEvent(t?"HTMLEvents":"UIEvents");o[t?"initEvent":"initUIEvent"](e,!0,!0,w,1),i.dispatchEvent(o)}:function(t,e,i){i=s(i,t),t?i.fireEvent("on"+e,T.createEventObject()):i["_on"+e]++},o={add:L,one:function(){return L.apply(I,arguments)},remove:D,clone:function(t,e,i){for(var o=0,n=R.get(e,i),s=n.length;o<s;o++)n[o].original&&L(t,n[o].type,n[o].original);return t},fire:function(t,e,i){var o,n,s,a,r,l=e.split(" ");for(o=l.length;o--;)if(e=l[o].replace(S,""),(a=l[o].replace(k,""))&&(a=a.split(".")),a||i||!t[A])for(r=R.get(t,e),i=[!1].concat(i),n=0,s=r.length;n<s;n++)r[n].inNamespaces(a)&&r[n].handler.apply(t,i);else N(z[e],e,t);return t},noConflict:function(){return e[t]=i,this}};function B(t,e,i,o,n){this.element=t,this.type=e,this.handler=i,this.original=o,this.namespaces=n,this.custom=P[e],this.isNative=z[e]&&t[A],this.eventType=l||this.isNative?e:"propertychange",this.customType=!l&&!this.isNative&&e,this.target=s(t,this.isNative),this.eventSupport=this.target[A]}function X(t){var e=t.relatedTarget;return e?e!==this&&"xul"!==e.prefix&&!/document/.test(this.toString())&&!function(t,e){for(;null!==(e=e.parentNode);)if(e===t)return!0;return!1}(this,e):null===e}if(w[a]){var Y=function(){var t,e=R.entries();for(t in e)e[t].type&&"unload"!==e[t].type&&D(e[t].element,e[t].type);w[r]("onunload",Y),w.CollectGarbage&&w.CollectGarbage()};w[a]("onunload",Y)}return o}),function(){function r(t){return new A(t)}var t=this,e=t._,a={},i=Array.prototype,o=Object.prototype,n=Function.prototype,s=i.slice,l=i.unshift,h=o.toString,c=o.hasOwnProperty,u=i.forEach,d=i.map,f=i.reduce,p=i.reduceRight,g=i.filter,m=i.every,x=i.some,v=i.indexOf,y=i.lastIndexOf,b=Array.isArray,w=Object.keys,M=n.bind;"undefined"!=typeof module&&module.exports?(module.exports=r)._=r:t._=r,r.VERSION="1.1.7";var k=r.each=r.forEach=function(t,e,i){if(null!=t)if(u&&t.forEach===u)t.forEach(e,i);else if(t.length===+t.length){for(var o=0,n=t.length;o<n;o++)if(o in t&&e.call(i,t[o],o,t)===a)return}else for(var s in t)if(c.call(t,s)&&e.call(i,t[s],s,t)===a)return};r.map=function(t,o,n){var s=[];return null==t?s:d&&t.map===d?t.map(o,n):(k(t,function(t,e,i){s[s.length]=o.call(n,t,e,i)}),s)},r.reduce=r.foldl=r.inject=function(t,o,n,s){var a=void 0!==n;if(null==t&&(t=[]),f&&t.reduce===f)return s&&(o=r.bind(o,s)),a?t.reduce(o,n):t.reduce(o);if(k(t,function(t,e,i){a?n=o.call(s,n,t,e,i):(n=t,a=!0)}),!a)throw new TypeError("Reduce of empty array with no initial value");return n},r.reduceRight=r.foldr=function(t,e,i,o){if(null==t&&(t=[]),p&&t.reduceRight===p)return o&&(e=r.bind(e,o)),void 0!==i?t.reduceRight(e,i):t.reduceRight(e);var n=(r.isArray(t)?t.slice():r.toArray(t)).reverse();return r.reduce(n,e,i,o)},r.find=r.detect=function(t,o,n){var s;return S(t,function(t,e,i){if(o.call(n,t,e,i))return s=t,!0}),s},r.filter=r.select=function(t,o,n){var s=[];return null==t?s:g&&t.filter===g?t.filter(o,n):(k(t,function(t,e,i){o.call(n,t,e,i)&&(s[s.length]=t)}),s)},r.reject=function(t,o,n){var s=[];return null==t||k(t,function(t,e,i){o.call(n,t,e,i)||(s[s.length]=t)}),s},r.every=r.all=function(t,o,n){var s=!0;return null==t?s:m&&t.every===m?t.every(o,n):(k(t,function(t,e,i){if(!(s=s&&o.call(n,t,e,i)))return a}),s)};var S=r.some=r.any=function(t,o,n){o=o||r.identity;var s=!1;return null==t?s:x&&t.some===x?t.some(o,n):(k(t,function(t,e,i){if(s|=o.call(n,t,e,i))return a}),!!s)};r.include=r.contains=function(t,e){var i=!1;return null==t?i:v&&t.indexOf===v?-1!=t.indexOf(e):(S(t,function(t){if(i=t===e)return!0}),i)},r.invoke=function(t,e){var i=s.call(arguments,2);return r.map(t,function(t){return(e.call?e||t:t[e]).apply(t,i)})},r.pluck=function(t,e){return r.map(t,function(t){return t[e]})},r.max=function(t,n,s){if(!n&&r.isArray(t))return Math.max.apply(Math,t);var a={computed:-1/0};return k(t,function(t,e,i){var o=n?n.call(s,t,e,i):t;o>=a.computed&&(a={value:t,computed:o})}),a.value},r.min=function(t,n,s){if(!n&&r.isArray(t))return Math.min.apply(Math,t);var a={computed:1/0};return k(t,function(t,e,i){var o=n?n.call(s,t,e,i):t;o<a.computed&&(a={value:t,computed:o})}),a.value},r.sortBy=function(t,o,n){return r.pluck(r.map(t,function(t,e,i){return{value:t,criteria:o.call(n,t,e,i)}}).sort(function(t,e){var i=t.criteria,o=e.criteria;return i<o?-1:o<i?1:0}),"value")},r.groupBy=function(t,o){var n={};return k(t,function(t,e){var i=o(t,e);(n[i]||(n[i]=[])).push(t)}),n},r.sortedIndex=function(t,e,i){i=i||r.identity;for(var o=0,n=t.length;o<n;){var s=o+n>>1;i(t[s])<i(e)?o=1+s:n=s}return o},r.toArray=function(t){return t?t.toArray?t.toArray():r.isArray(t)?s.call(t):r.isArguments(t)?s.call(t):r.values(t):[]},r.size=function(t){return r.toArray(t).length},r.first=r.head=function(t,e,i){return null==e||i?t[0]:s.call(t,0,e)},r.rest=r.tail=function(t,e,i){return s.call(t,null==e||i?1:e)},r.last=function(t){return t[t.length-1]},r.compact=function(t){return r.filter(t,function(t){return!!t})},r.flatten=function(t){return r.reduce(t,function(t,e){return r.isArray(e)?t.concat(r.flatten(e)):(t[t.length]=e,t)},[])},r.without=function(t){return r.difference(t,s.call(arguments,1))},r.uniq=r.unique=function(t,o){return r.reduce(t,function(t,e,i){return 0!=i&&(!0===o?r.last(t)==e:r.include(t,e))||(t[t.length]=e),t},[])},r.union=function(){return r.uniq(r.flatten(arguments))},r.intersection=r.intersect=function(t){var i=s.call(arguments,1);return r.filter(r.uniq(t),function(e){return r.every(i,function(t){return 0<=r.indexOf(t,e)})})},r.difference=function(t,e){return r.filter(t,function(t){return!r.include(e,t)})},r.zip=function(){for(var t=s.call(arguments),e=r.max(r.pluck(t,"length")),i=new Array(e),o=0;o<e;o++)i[o]=r.pluck(t,""+o);return i},r.indexOf=function(t,e,i){if(null==t)return-1;var o,n;if(i)return t[o=r.sortedIndex(t,e)]===e?o:-1;if(v&&t.indexOf===v)return t.indexOf(e);for(o=0,n=t.length;o<n;o++)if(t[o]===e)return o;return-1},r.lastIndexOf=function(t,e){if(null==t)return-1;if(y&&t.lastIndexOf===y)return t.lastIndexOf(e);for(var i=t.length;i--;)if(t[i]===e)return i;return-1},r.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=i||1;for(var o=Math.max(Math.ceil((e-t)/i),0),n=0,s=new Array(o);n<o;)s[n++]=t,t+=i;return s},r.bind=function(t,e){if(t.bind===M&&M)return M.apply(t,s.call(arguments,1));var i=s.call(arguments,2);return function(){return t.apply(e,i.concat(s.call(arguments)))}},r.bindAll=function(e){var t=s.call(arguments,1);return 0==t.length&&(t=r.functions(e)),k(t,function(t){e[t]=r.bind(e[t],e)}),e},r.memoize=function(e,i){var o={};return i=i||r.identity,function(){var t=i.apply(this,arguments);return c.call(o,t)?o[t]:o[t]=e.apply(this,arguments)}},r.delay=function(t,e){var i=s.call(arguments,2);return setTimeout(function(){return t.apply(t,i)},e)},r.defer=function(t){return r.delay.apply(r,[t,1].concat(s.call(arguments,1)))};function T(i,o,n){var s;return function(){var t=this,e=arguments;n&&clearTimeout(s),!n&&s||(s=setTimeout(function(){s=null,i.apply(t,e)},o))}}r.throttle=function(t,e){return T(t,e,!1)},r.debounce=function(t,e){return T(t,e,!0)},r.once=function(t){var e,i=!1;return function(){return i?e:(i=!0,e=t.apply(this,arguments))}},r.wrap=function(e,i){return function(){var t=[e].concat(s.call(arguments));return i.apply(this,t)}},r.compose=function(){var i=s.call(arguments);return function(){for(var t=s.call(arguments),e=i.length-1;0<=e;e--)t=[i[e].apply(this,t)];return t[0]}},r.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},r.keys=w||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var i in t)c.call(t,i)&&(e[e.length]=i);return e},r.values=function(t){return r.map(t,r.identity)},r.functions=r.methods=function(t){var e=[];for(var i in t)r.isFunction(t[i])&&e.push(i);return e.sort()},r.extend=function(i){return k(s.call(arguments,1),function(t){for(var e in t)void 0!==t[e]&&(i[e]=t[e])}),i},r.defaults=function(i){return k(s.call(arguments,1),function(t){for(var e in t)null==i[e]&&(i[e]=t[e])}),i},r.clone=function(t){return r.isArray(t)?t.slice():r.extend({},t)},r.tap=function(t,e){return e(t),t},r.isEqual=function(t,e){if(t===e)return!0;var i=typeof t;if(i!=typeof e)return!1;if(t==e)return!0;if(!t&&e||t&&!e)return!1;if(t._chain&&(t=t._wrapped),e._chain&&(e=e._wrapped),t.isEqual)return t.isEqual(e);if(e.isEqual)return e.isEqual(t);if(r.isDate(t)&&r.isDate(e))return t.getTime()===e.getTime();if(r.isNaN(t)&&r.isNaN(e))return!1;if(r.isRegExp(t)&&r.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline;if("object"!=i)return!1;if(t.length&&t.length!==e.length)return!1;var o=r.keys(t),n=r.keys(e);if(o.length!=n.length)return!1;for(var s in t)if(!(s in e&&r.isEqual(t[s],e[s])))return!1;return!0},r.isEmpty=function(t){if(r.isArray(t)||r.isString(t))return 0===t.length;for(var e in t)if(c.call(t,e))return!1;return!0},r.isElement=function(t){return!!t&&1==t.nodeType},r.isArray=b||function(t){return"[object Array]"===h.call(t)},r.isObject=function(t){return t===Object(t)},r.isArguments=function(t){return!!t&&!!c.call(t,"callee")},r.isFunction=function(t){return!!(t&&t.constructor&&t.call&&t.apply)},r.isString=function(t){return!!(""===t||t&&t.charCodeAt&&t.substr)},r.isNumber=function(t){return!!(0===t||t&&t.toExponential&&t.toFixed)},r.isNaN=function(t){return t!=t},r.isBoolean=function(t){return!0===t||!1===t},r.isDate=function(t){return!!(t&&t.getTimezoneOffset&&t.setUTCFullYear)},r.isRegExp=function(t){return!(!(t&&t.test&&t.exec)||!t.ignoreCase&&!1!==t.ignoreCase)},r.isNull=function(t){return null===t},r.isUndefined=function(t){return void 0===t},r.noConflict=function(){return t._=e,this},r.identity=function(t){return t},r.times=function(t,e,i){for(var o=0;o<t;o++)e.call(i,o)},r.mixin=function(e){k(r.functions(e),function(t){C(t,r[t]=e[t])})};var F=0;r.uniqueId=function(t){var e=F++;return t?t+e:e},r.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},r.template=function(t,e){var i=r.templateSettings,o="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+t.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(i.interpolate,function(t,e){return"',"+e.replace(/\\'/g,"'")+",'"}).replace(i.evaluate||null,function(t,e){return"');"+e.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",n=new Function("obj",o);return e?n(e):n};var A=function(t){this._wrapped=t};r.prototype=A.prototype;function O(t,e){return e?r(t).chain():t}var C=function(t,e){A.prototype[t]=function(){var t=s.call(arguments);return l.call(t,this._wrapped),O(e.apply(r,t),this._chain)}};r.mixin(r),k(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];A.prototype[t]=function(){return e.apply(this._wrapped,arguments),O(this._wrapped,this._chain)}}),k(["concat","join","slice"],function(t){var e=i[t];A.prototype[t]=function(){return O(e.apply(this._wrapped,arguments),this._chain)}}),A.prototype.chain=function(){return this._chain=!0,this},A.prototype.value=function(){return this._wrapped}}(),function(){var l,t=this,e=this.Flotr;l={_:_,bean:bean,isIphone:/iphone/i.test(navigator.userAgent),isIE:-1!=navigator.appVersion.indexOf("MSIE")&&parseFloat(navigator.appVersion.split("MSIE")[1]),graphTypes:{},plugins:{},addType:function(t,e){l.graphTypes[t]=e,l.defaultOptions[t]=e.options||{},l.defaultOptions.defaultType=l.defaultOptions.defaultType||t},addPlugin:function(t,e){l.plugins[t]=e,l.defaultOptions[t]=e.options||{}},draw:function(t,e,i,o){return new(o=o||l.Graph)(t,e,i)},merge:function(t,e){var i,o,n=e||{};for(i in t)(o=t[i])&&"object"==typeof o?o.constructor===Array?n[i]=this._.clone(o):o.constructor===RegExp||this._.isElement(o)||o.jquery?n[i]=o:n[i]=l.merge(o,e?e[i]:void 0):n[i]=o;return n},clone:function(t){return l.merge(t,{})},getTickSize:function(t,e,i,o){var n=(i-e)/t,s=l.getMagnitude(n),a=10,r=n/s;return r<1.5?a=1:r<2.25?a=2:r<3?a=0===o?2:2.5:r<7.5&&(a=5),a*s},defaultTickFormatter:function(t,e){return t+""},defaultTrackFormatter:function(t){return"("+t.x+", "+t.y+")"},engineeringNotation:function(t,e,i){var o=["Y","Z","E","P","T","G","M","k",""],n=o.length;if(i=i||1e3,e=Math.pow(10,e||2),0===t)return 0;if(1<t)for(;n--&&i<=t;)t/=i;else for(n=(o=["y","z","a","f","p","n","Âµ","m",""]).length;n--&&t<1;)t*=i;return Math.round(t*e)/e+o[n]},getMagnitude:function(t){return Math.pow(10,Math.floor(Math.log(t)/Math.LN10))},toPixel:function(t){return Math.floor(t)+.5},toRad:function(t){return-t*(Math.PI/180)},floorInBase:function(t,e){return e*Math.floor(t/e)},drawText:function(t,e,i,o,n){t.fillText?(n=this._.extend({size:l.defaultOptions.fontSize,color:"#000000",textAlign:"left",textBaseline:"bottom",weight:1,angle:0},n),t.save(),t.translate(i,o),t.rotate(n.angle),t.fillStyle=n.color,t.font=(1<n.weight?"bold ":"")+1.3*n.size+"px sans-serif",t.textAlign=n.textAlign,t.textBaseline=n.textBaseline,t.fillText(e,0,0),t.restore()):t.drawText(e,i,o,n)},getBestTextAlign:function(t,e){return e=e||{textAlign:"center",textBaseline:"middle"},t+=l.getTextAngleFromAlign(e),.01<Math.abs(Math.cos(t))&&(e.textAlign=0<Math.cos(t)?"right":"left"),.01<Math.abs(Math.sin(t))&&(e.textBaseline=0<Math.sin(t)?"top":"bottom"),e},alignTable:{"right middle":0,"right top":Math.PI/4,"center top":Math.PI/2,"left top":Math.PI/4*3,"left middle":Math.PI,"left bottom":Math.PI/4*-3,"center bottom":-Math.PI/2,"right bottom":-Math.PI/4,"center middle":0},getTextAngleFromAlign:function(t){return l.alignTable[t.textAlign+" "+t.textBaseline]||0},noConflict:function(){return t.Flotr=e,this}},t.Flotr=l}(),Flotr.defaultOptions={colors:["#00A8F0","#C0D800","#CB4B4B","#4DA74D","#9440ED"],ieBackgroundColor:"#FFFFFF",title:null,subtitle:null,shadowSize:4,defaultType:null,HtmlText:!0,fontColor:"#545454",fontSize:7.5,resolution:1,parseFloat:!0,preventDefault:!0,xaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:0,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,mode:"normal",timeFormat:null,timeMode:"UTC",timeUnit:"millisecond",scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},x2axis:{},yaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:90,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},y2axis:{titleAngle:270},grid:{color:"#545454",backgroundColor:null,backgroundImage:null,watermarkAlpha:.4,tickColor:"#DDDDDD",labelMargin:3,verticalLines:!0,minorVerticalLines:null,horizontalLines:!0,minorHorizontalLines:null,outlineWidth:1,outline:"nsew",circular:!1},mouse:{track:!1,trackAll:!1,position:"se",relative:!1,trackFormatter:Flotr.defaultTrackFormatter,margin:5,lineColor:"#FF3F19",trackDecimals:1,sensibility:2,trackY:!0,radius:3,fillColor:null,fillOpacity:.4}},function(){function l(t,e,i,o){this.rgba=["r","g","b","a"];for(var n=4;-1<--n;)this[this.rgba[n]]=arguments[n]||(3==n?1:0);this.normalize()}var h=Flotr._,o={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};l.prototype={scale:function(t,e,i,o){for(var n=4;-1<--n;)h.isUndefined(arguments[n])||(this[this.rgba[n]]*=arguments[n]);return this.normalize()},alpha:function(t){return h.isUndefined(t)||h.isNull(t)||(this.a=t),this.normalize()},clone:function(){return new l(this.r,this.b,this.g,this.a)},limit:function(t,e,i){return Math.max(Math.min(t,i),e)},normalize:function(){var t=this.limit;return this.r=t(parseInt(this.r,10),0,255),this.g=t(parseInt(this.g,10),0,255),this.b=t(parseInt(this.b,10),0,255),this.a=t(this.a,0,1),this},distance:function(t){if(t){t=new l.parse(t);for(var e=0,i=3;-1<--i;)e+=Math.abs(this[this.rgba[i]]-t[this.rgba[i]]);return e}},toString:function(){return 1<=this.a?"rgb("+[this.r,this.g,this.b].join(",")+")":"rgba("+[this.r,this.g,this.b,this.a].join(",")+")"},contrast:function(){return 1-(.299*this.r+.587*this.g+.114*this.b)/255<.5?"#000000":"#ffffff"}},h.extend(l,{parse:function(t){if(t instanceof l)return t;var e;if(e=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))return new l(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16));if(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))return new l(parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10));if(e=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))return new l(parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16));if(e=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(t))return new l(parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10),parseFloat(e[4]));if(e=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))return new l(2.55*parseFloat(e[1]),2.55*parseFloat(e[2]),2.55*parseFloat(e[3]));if(e=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(t))return new l(2.55*parseFloat(e[1]),2.55*parseFloat(e[2]),2.55*parseFloat(e[3]),parseFloat(e[4]));var i=(t+"").replace(/^\s*([\S\s]*?)\s*$/,"$1").toLowerCase();return"transparent"==i?new l(255,255,255,0):(e=o[i])?new l(e[0],e[1],e[2]):new l(0,0,0,0)},processColor:function(t,e){var i=e.opacity;if(!t)return"rgba(0, 0, 0, 0)";if(t instanceof l)return t.alpha(i).toString();if(h.isString(t))return l.parse(t).alpha(i).toString();var o=t.colors?t:{colors:t};if(!e.ctx)return h.isArray(o.colors)?l.parse(h.isArray(o.colors[0])?o.colors[0][1]:o.colors[0]).alpha(i).toString():"rgba(0, 0, 0, 0)";o=h.extend({start:"top",end:"bottom"},o),/top/i.test(o.start)&&(e.x1=0),/left/i.test(o.start)&&(e.y1=0),/bottom/i.test(o.end)&&(e.x2=0),/right/i.test(o.end)&&(e.y2=0);var n,s,a,r=e.ctx.createLinearGradient(e.x1,e.y1,e.x2,e.y2);for(n=0;n<o.colors.length;n++)s=o.colors[n],h.isArray(s)?(a=s[0],s=s[1]):a=n/(o.colors.length-1),r.addColorStop(a,l.parse(s).alpha(i));return r}}),Flotr.Color=l}(),Flotr.Date={set:function(t,e,i,o){t[e="set"+("UTC"===(i=i||"UTC")?"UTC":"")+e](o)},get:function(t,e,i){return t[e="get"+("UTC"===(i=i||"UTC")?"UTC":"")+e]()},format:function(t,e,i){function o(t){return 1==(t+="").length?"0"+t:t}if(t){for(var n,s=this.get,a={h:s(t,"Hours",i).toString(),H:o(s(t,"Hours",i)),M:o(s(t,"Minutes",i)),S:o(s(t,"Seconds",i)),s:s(t,"Milliseconds",i),d:s(t,"Date",i).toString(),m:(s(t,"Month",i)+1).toString(),y:s(t,"FullYear",i).toString(),b:Flotr.Date.monthNames[s(t,"Month",i)]},r=[],l=!1,h=0;h<e.length;++h)n=e.charAt(h),l?(r.push(a[n]||n),l=!1):"%"==n?l=!0:r.push(n);return r.join("")}},getFormat:function(t,e){var i=Flotr.Date.timeUnits;return t<i.second?"%h:%M:%S.%s":t<i.minute?"%h:%M:%S":t<i.day?e<2*i.day?"%h:%M":"%b %d %h:%M":t<i.month?"%b %d":t<i.year?e<i.year?"%b":"%b %y":"%y"},formatter:function(t,e){var i=e.options,o=Flotr.Date.timeUnits[i.timeUnit],n=new Date(t*o);if(e.options.timeFormat)return Flotr.Date.format(n,i.timeFormat,i.timeMode);var s=(e.max-e.min)*o,a=e.tickSize*Flotr.Date.timeUnits[e.tickUnit];return Flotr.Date.format(n,Flotr.Date.getFormat(a,s),i.timeMode)},generator:function(t){function e(t){s(x,t,c,Flotr.floorInBase(a(x,t,c),m))}var i,o,n,s=this.set,a=this.get,r=this.timeUnits,l=this.spec,h=t.options,c=h.timeMode,u=r[h.timeUnit],d=t.min*u,f=t.max*u,p=(f-d)/h.noTicks,g=[],m=t.tickSize;for(o=h.tickFormatter===Flotr.defaultTickFormatter?this.formatter:h.tickFormatter,n=0;n<l.length-1;++n){var x=l[n][0]*r[l[n][1]];if(p<(x+l[n+1][0]*r[l[n+1][1]])/2&&m<=x)break}m=l[n][0],"year"!=(i=l[n][1])||.5==(m=Flotr.getTickSize(h.noTicks*r.year,d,f,0))&&(i="month",m=6),t.tickUnit=i;var v=(t.tickSize=m)*r[i];switch(x=new Date(d),i){case"millisecond":e("Milliseconds");break;case"second":e("Seconds");break;case"minute":e("Minutes");break;case"hour":e("Hours");break;case"month":e("Month");break;case"year":e("FullYear")}v>=r.second&&s(x,"Milliseconds",c,0),v>=r.minute&&s(x,"Seconds",c,0),v>=r.hour&&s(x,"Minutes",c,0),v>=r.day&&s(x,"Hours",c,0),v>=4*r.day&&s(x,"Date",c,1),v>=r.year&&s(x,"Month",c,0);var y,b=0,w=NaN;do{if(y=w,w=x.getTime(),g.push({v:w/u,label:o(w/u,t)}),"month"==i)if(m<1){s(x,"Date",c,1);var M=x.getTime();s(x,"Month",c,a(x,"Month",c)+1);var k=x.getTime();x.setTime(w+b*r.hour+(k-M)*m),b=a(x,"Hours",c),s(x,"Hours",c,0)}else s(x,"Month",c,a(x,"Month",c)+m);else"year"==i?s(x,"FullYear",c,a(x,"FullYear",c)+m):x.setTime(w+v)}while(w<f&&w!=y);return g},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:31556952e3},spec:[[1,"millisecond"],[20,"millisecond"],[50,"millisecond"],[100,"millisecond"],[200,"millisecond"],[500,"millisecond"],[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},function(){function o(t){return t&&t.jquery?t[0]:t}var n=Flotr._;Flotr.DOM={addClass:function(t,e){var i=(t=o(t)).className?t.className:"";n.include(i.split(/\s+/g),e)||(t.className=(i?i+" ":"")+e)},create:function(t){return document.createElement(t)},node:function(t){var e,i=Flotr.DOM.create("div");return i.innerHTML=t,e=i.children[0],i.innerHTML="",e},empty:function(t){(t=o(t)).innerHTML=""},remove:function(t){(t=o(t)).parentNode.removeChild(t)},hide:function(t){t=o(t),Flotr.DOM.setStyles(t,{display:"none"})},insert:function(t,e){t=o(t),n.isString(e)?t.innerHTML+=e:n.isElement(e)&&t.appendChild(e)},opacity:function(t,e){(t=o(t)).style.opacity=e},position:function(t,e){return(t=o(t)).offsetParent?((e=this.position(t.offsetParent)).left+=t.offsetLeft,e.top+=t.offsetTop,e):{left:t.offsetLeft||0,top:t.offsetTop||0}},removeClass:function(t,e){var i=t.className?t.className:"";(t=o(t)).className=n.filter(i.split(/\s+/g),function(t){if(t!=e)return!0}).join(" ")},setStyles:function(i,t){i=o(i),n.each(t,function(t,e){i.style[e]=t})},show:function(t){t=o(t),Flotr.DOM.setStyles(t,{display:""})},size:function(t){return{height:(t=o(t)).offsetHeight,width:t.offsetWidth}}}}(),function(){var n=Flotr,o=n.bean;n.EventAdapter={observe:function(t,e,i){return o.add(t,e,i),this},fire:function(t,e,i){return o.fire(t,e,i),"undefined"!=typeof Prototype&&Event.fire(t,e,i),this},stopObserving:function(t,e,i){return o.remove(t,e,i),this},eventPointer:function(t){if(!n._.isUndefined(t.touches)&&0<t.touches.length)return{x:t.touches[0].pageX,y:t.touches[0].pageY};if(!n._.isUndefined(t.changedTouches)&&0<t.changedTouches.length)return{x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY};if(t.pageX||t.pageY)return{x:t.pageX,y:t.pageY};if(t.clientX||t.clientY){var e=document,i=e.body,o=e.documentElement;return{x:t.clientX+i.scrollLeft+o.scrollLeft,y:t.clientY+i.scrollTop+o.scrollTop}}}}}(),function(){function t(t){this.o=t}var r=Flotr,s=r.DOM,n=r._;t.prototype={dimensions:function(t,e,i,o){return t?this.o.html?this.html(t,this.o.element,i,o):this.canvas(t,e):{width:0,height:0}},canvas:function(t,e){if(this.o.textEnabled){e=e||{};var i=this.measureText(t,e).width,o=e.size||r.defaultOptions.fontSize,n=e.angle||0,s=Math.cos(n),a=Math.sin(n);return{width:Math.abs(s*i)+Math.abs(a*o)+2,height:Math.abs(a*i)+Math.abs(s*o)+6}}},html:function(t,e,i,o){var n=s.create("div");return s.setStyles(n,{position:"absolute",top:"-10000px"}),s.insert(n,'<div style="'+i+'" class="'+o+' flotr-dummy-div">'+t+"</div>"),s.insert(this.o.element,n),s.size(n)},measureText:function(t,e){var i,o=this.o.ctx;return!o.fillText||r.isIphone&&o.measure?{width:o.measure(t,e)}:(e=n.extend({size:r.defaultOptions.fontSize,weight:1,angle:0},e),o.save(),o.font=(1<e.weight?"bold ":"")+1.3*e.size+"px sans-serif",i=o.measureText(t),o.restore(),i)}},Flotr.Text=t}(),function(){function t(t,e,i){return g.observe.apply(this,arguments),this._handles.push(arguments),this}var f=Flotr.DOM,g=Flotr.EventAdapter,m=Flotr._,x=Flotr;Graph=function(t,e,i){this._setEl(t),this._initMembers(),this._initPlugins(),g.fire(this.el,"flotr:beforeinit",[this]),this.data=e,this.series=x.Series.getSeries(e),this._initOptions(i),this._initGraphTypes(),this._initCanvas(),this._text=new x.Text({element:this.el,ctx:this.ctx,html:this.options.HtmlText,textEnabled:this.textEnabled}),g.fire(this.el,"flotr:afterconstruct",[this]),this._initEvents(),this.findDataRanges(),this.calculateSpacing(),this.draw(m.bind(function(){g.fire(this.el,"flotr:afterinit",[this])},this))},Graph.prototype={destroy:function(){g.fire(this.el,"flotr:destroy"),m.each(this._handles,function(t){g.stopObserving.apply(this,t)}),this._handles=[],this.el.graph=null},observe:t,_observe:t,processColor:function(t,e){var i={x1:0,y1:0,x2:this.plotWidth,y2:this.plotHeight,opacity:1,ctx:this.ctx};return m.extend(i,e),x.Color.processColor(t,i)},findDataRanges:function(){var e,i,o,t=this.axes;m.each(this.series,function(t){(o=t.getRange())&&(e=t.xaxis,i=t.yaxis,e.datamin=Math.min(o.xmin,e.datamin),e.datamax=Math.max(o.xmax,e.datamax),i.datamin=Math.min(o.ymin,i.datamin),i.datamax=Math.max(o.ymax,i.datamax),e.used=e.used||o.xused,i.used=i.used||o.yused)},this),t.x.used||t.x2.used||(t.x.used=!0),t.y.used||t.y2.used||(t.y.used=!0),m.each(t,function(t){t.calculateRange()});var n=m.keys(x.graphTypes),s=!1;m.each(this.series,function(e){e.hide||(m.each(n,function(t){e[t]&&e[t].show&&(this.extendRange(t,e),s=!0)},this),s||this.extendRange(this.options.defaultType,e))},this)},extendRange:function(t,e){this[t].extendRange&&this[t].extendRange(e,e.data,e[t],this[t]),this[t].extendYRange&&this[t].extendYRange(e.yaxis,e.data,e[t],this[t]),this[t].extendXRange&&this[t].extendXRange(e.xaxis,e.data,e[t],this[t])},calculateSpacing:function(){var t,e,i=this.axes,o=this.options,n=this.series,s=o.grid.labelMargin,a=this._text,r=i.x,l=i.x2,h=i.y,c=i.y2,u=o.grid.outlineWidth;for(m.each(i,function(t){t.calculateTicks(),t.calculateTextDimensions(a,o)}),e=a.dimensions(o.title,{size:1.5*o.fontSize},"font-size:1em;font-weight:bold;","flotr-title"),this.titleHeight=e.height,e=a.dimensions(o.subtitle,{size:o.fontSize},"font-size:smaller;","flotr-subtitle"),this.subtitleHeight=e.height,t=0;t<o.length;++t)n[t].points.show&&(u=Math.max(u,n[t].points.radius+n[t].points.lineWidth/2));var d=this.plotOffset;!1===r.options.margin?(d.bottom=0,d.top=0):!0===r.options.margin?(d.bottom+=(o.grid.circular?0:r.used&&r.options.showLabels?r.maxLabel.height+s:0)+(r.used&&r.options.title?r.titleSize.height+s:0)+u,d.top+=(o.grid.circular?0:l.used&&l.options.showLabels?l.maxLabel.height+s:0)+(l.used&&l.options.title?l.titleSize.height+s:0)+this.subtitleHeight+this.titleHeight+u):(d.bottom=r.options.margin,d.top=r.options.margin),!1===h.options.margin?(d.left=0,d.right=0):!0===h.options.margin?(d.left+=(o.grid.circular?0:h.used&&h.options.showLabels?h.maxLabel.width+s:0)+(h.used&&h.options.title?h.titleSize.width+s:0)+u,d.right+=(o.grid.circular?0:c.used&&c.options.showLabels?c.maxLabel.width+s:0)+(c.used&&c.options.title?c.titleSize.width+s:0)+u):(d.left=h.options.margin,d.right=h.options.margin),d.top=Math.floor(d.top),this.plotWidth=this.canvasWidth-d.left-d.right,this.plotHeight=this.canvasHeight-d.bottom-d.top,r.length=l.length=this.plotWidth,h.length=c.length=this.plotHeight,h.offset=c.offset=this.plotHeight,r.setScale(),l.setScale(),h.setScale(),c.setScale()},draw:function(t){var e,i=this.ctx;if(g.fire(this.el,"flotr:beforedraw",[this.series,this]),this.series.length){for(i.save(),i.translate(this.plotOffset.left,this.plotOffset.top),e=0;e<this.series.length;e++)this.series[e].hide||this.drawSeries(this.series[e]);i.restore(),this.clip()}g.fire(this.el,"flotr:afterdraw",[this.series,this]),t&&t()},drawSeries:function(i){function o(t,e){var i=this.getOptions(t,e);this[e].draw(i)}var n=!1;i=i||this.series,m.each(x.graphTypes,function(t,e){i[e]&&i[e].show&&this[e]&&(n=!0,o.call(this,i,e))},this),n||o.call(this,i,this.options.defaultType)},getOptions:function(t,e){var i=t[e],o=(this[e],t.xaxis),n=t.yaxis,s={context:this.ctx,width:this.plotWidth,height:this.plotHeight,fontSize:this.options.fontSize,fontColor:this.options.fontColor,textEnabled:this.textEnabled,htmlText:this.options.HtmlText,text:this._text,element:this.el,data:t.data,color:t.color,shadowSize:t.shadowSize,xScale:o.d2p,yScale:n.d2p,xInverse:o.p2d,yInverse:n.p2d};return(s=x.merge(i,s)).fillStyle=this.processColor(i.fillColor||t.color,{opacity:i.fillOpacity}),s},getEventPosition:function(t){var e,i,o,n=document,s=n.body,a=n.documentElement,r=this.axes,l=this.plotOffset,h=this.lastMousePos,c=g.eventPointer(t),u=c.x-h.pageX,d=c.y-h.pageY;return o="ontouchstart"in this.el?(e=f.position(this.overlay),i=c.x-e.left-l.left,c.y-e.top-l.top):(e=this.overlay.getBoundingClientRect(),i=t.clientX-e.left-l.left-s.scrollLeft-a.scrollLeft,t.clientY-e.top-l.top-s.scrollTop-a.scrollTop),{x:r.x.p2d(i),x2:r.x2.p2d(i),y:r.y.p2d(o),y2:r.y2.p2d(o),relX:i,relY:o,dX:u,dY:d,absX:c.x,absY:c.y,pageX:c.x,pageY:c.y}},clickHandler:function(t){if(this.ignoreClick)return this.ignoreClick=!1,this.ignoreClick;g.fire(this.el,"flotr:click",[this.getEventPosition(t),this])},mouseMoveHandler:function(t){if(!this.mouseDownMoveHandler){var e=this.getEventPosition(t);g.fire(this.el,"flotr:mousemove",[t,e,this]),this.lastMousePos=e}},mouseDownHandler:function(i){this.mouseUpHandler||(this.mouseUpHandler=m.bind(function(t){g.stopObserving(document,"mouseup",this.mouseUpHandler),g.stopObserving(document,"mousemove",this.mouseDownMoveHandler),this.mouseDownMoveHandler=null,this.mouseUpHandler=null,g.fire(this.el,"flotr:mouseup",[t,this])},this),this.mouseDownMoveHandler=m.bind(function(t){var e=this.getEventPosition(t);g.fire(this.el,"flotr:mousemove",[i,e,this]),this.lastMousePos=e},this),g.observe(document,"mouseup",this.mouseUpHandler),g.observe(document,"mousemove",this.mouseDownMoveHandler),g.fire(this.el,"flotr:mousedown",[i,this]),this.ignoreClick=!1)},drawTooltip:function(t,e,i,o){var n=this.getMouseTrack(),s="opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;",a=o.position,r=o.margin,l=this.plotOffset;null!==e&&null!==i?(o.relative?("n"==a.charAt(0)?s+="bottom:"+(r-l.top-i+this.canvasHeight)+"px;top:auto;":"s"==a.charAt(0)&&(s+="top:"+(r+l.top+i)+"px;bottom:auto;"),"e"==a.charAt(1)?s+="left:"+(r+l.left+e)+"px;right:auto;":"w"==a.charAt(1)&&(s+="right:"+(r-l.left-e+this.canvasWidth)+"px;left:auto;")):("n"==a.charAt(0)?s+="top:"+(r+l.top)+"px;bottom:auto;":"s"==a.charAt(0)&&(s+="bottom:"+(r+l.bottom)+"px;top:auto;"),"e"==a.charAt(1)?s+="right:"+(r+l.right)+"px;left:auto;":"w"==a.charAt(1)&&(s+="left:"+(r+l.left)+"px;right:auto;")),n.style.cssText=s,f.empty(n),f.insert(n,t),f.show(n)):f.hide(n)},clip:function(t){var e=this.plotOffset,i=this.canvasWidth,o=this.canvasHeight;if(t=t||this.ctx,x.isIE&&x.isIE<9&&!x.isFlashCanvas){if(t===this.octx)return;t.save(),t.fillStyle=this.processColor(this.options.ieBackgroundColor),t.fillRect(0,0,i,e.top),t.fillRect(0,0,e.left,o),t.fillRect(0,o-e.bottom,i,e.bottom),t.fillRect(i-e.right,0,e.right,o),t.restore()}else t.clearRect(0,0,i,e.top),t.clearRect(0,0,e.left,o),t.clearRect(0,o-e.bottom,i,e.bottom),t.clearRect(i-e.right,0,e.right,o)},_initMembers:function(){this._handles=[],this.lastMousePos={pageX:null,pageY:null},this.plotOffset={left:0,right:0,top:0,bottom:0},this.ignoreClick=!0,this.prevHit=null},_initGraphTypes:function(){m.each(x.graphTypes,function(t,e){this[e]=x.clone(t)},this)},_initEvents:function(){var e,i,o,n=this.el;"ontouchstart"in n?(e=m.bind(function(t){o=!0,g.stopObserving(document,"touchend",e),g.fire(n,"flotr:mouseup",[event,this]),this.multitouches=null,i||this.clickHandler(t)},this),this.observe(this.overlay,"touchstart",m.bind(function(t){o=i=!1,this.ignoreClick=!1,t.touches&&1<t.touches.length&&(this.multitouches=t.touches),g.fire(n,"flotr:mousedown",[event,this]),this.observe(document,"touchend",e)},this)),this.observe(this.overlay,"touchmove",m.bind(function(t){var e=this.getEventPosition(t);this.options.preventDefault&&t.preventDefault(),i=!0,this.multitouches||t.touches&&1<t.touches.length?this.multitouches=t.touches:o||g.fire(n,"flotr:mousemove",[event,e,this]),this.lastMousePos=e},this))):this.observe(this.overlay,"mousedown",m.bind(this.mouseDownHandler,this)).observe(n,"mousemove",m.bind(this.mouseMoveHandler,this)).observe(this.overlay,"click",m.bind(this.clickHandler,this)).observe(n,"mouseout",function(t){g.fire(n,"flotr:mouseout",t)})},_initCanvas:function(){function t(i,o){return i||(i=f.create("canvas"),"undefined"!=typeof FlashCanvas&&"function"==typeof i.getContext&&(FlashCanvas.initElement(i),this.isFlashCanvas=!0),i.className="flotr-"+o,i.style.cssText="position:absolute;left:0px;top:0px;",f.insert(s,i)),m.each(n,function(t,e){f.show(i),"canvas"==o&&i.getAttribute(e)===t||(i.setAttribute(e,t*a.resolution),i.style[e]=t+"px")}),i.context_=null,i}function e(t){window.G_vmlCanvasManager&&window.G_vmlCanvasManager.initElement(t);var e=t.getContext("2d");return window.G_vmlCanvasManager||e.scale(a.resolution,a.resolution),e}var i,o,n,s=this.el,a=this.options,r=s.children,l=[];for(o=r.length;o--;)i=r[o],this.canvas||"flotr-canvas"!==i.className?this.overlay||"flotr-overlay"!==i.className?l.push(i):this.overlay=i:this.canvas=i;for(o=l.length;o--;)s.removeChild(l[o]);if(f.setStyles(s,{position:"relative"}),(n={}).width=s.clientWidth,n.height=s.clientHeight,n.width<=0||n.height<=0||a.resolution<=0)throw"Invalid dimensions for plot, width = "+n.width+", height = "+n.height+", resolution = "+a.resolution;this.canvas=t(this.canvas,"canvas"),this.overlay=t(this.overlay,"overlay"),this.ctx=e(this.canvas),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.octx=e(this.overlay),this.octx.clearRect(0,0,this.overlay.width,this.overlay.height),this.canvasHeight=n.height,this.canvasWidth=n.width,this.textEnabled=!!this.ctx.drawText||!!this.ctx.fillText},_initPlugins:function(){m.each(x.plugins,function(t,i){m.each(t.callbacks,function(t,e){this.observe(this.el,e,m.bind(t,this))},this),this[i]=x.clone(t),m.each(this[i],function(t,e){m.isFunction(t)&&(this[i][e]=m.bind(t,this))},this)},this)},_initOptions:function(t){var e=x.clone(x.defaultOptions);e.x2axis=m.extend(m.clone(e.xaxis),e.x2axis),e.y2axis=m.extend(m.clone(e.yaxis),e.y2axis),this.options=x.merge(t||{},e),null===this.options.grid.minorVerticalLines&&"logarithmic"===this.options.xaxis.scaling&&(this.options.grid.minorVerticalLines=!0),null===this.options.grid.minorHorizontalLines&&"logarithmic"===this.options.yaxis.scaling&&(this.options.grid.minorHorizontalLines=!0),g.fire(this.el,"flotr:afterinitoptions",[this]),this.axes=x.Axis.getAxes(this.options);var i,o,n,s,a=[],r=[],l=this.series.length,h=this.series.length,c=this.options.colors,u=[],d=0;for(o=h-1;-1<o;--o)(i=this.series[o].color)&&(--h,m.isNumber(i)?a.push(i):u.push(x.Color.parse(i)));for(o=a.length-1;-1<o;--o)h=Math.max(h,a[o]+1);for(o=0;r.length<h;){i=c.length==o?new x.Color(100,100,100):x.Color.parse(c[o]);var f=1+(d%2==1?-1:1)*Math.ceil(d/2)*.2;i.scale(f,f,f),r.push(i),++o>=c.length&&(o=0,++d)}for(n=o=0;o<l;++o){for(var p in(s=this.series[o]).color?m.isNumber(s.color)&&(s.color=r[s.color].toString()):s.color=r[n++].toString(),s.xaxis||(s.xaxis=this.axes.x),1==s.xaxis?s.xaxis=this.axes.x:2==s.xaxis&&(s.xaxis=this.axes.x2),s.yaxis||(s.yaxis=this.axes.y),1==s.yaxis?s.yaxis=this.axes.y:2==s.yaxis&&(s.yaxis=this.axes.y2),x.graphTypes)s[p]=m.extend(m.clone(this.options[p]),s[p]);s.mouse=m.extend(m.clone(this.options.mouse),s.mouse),m.isUndefined(s.shadowSize)&&(s.shadowSize=this.options.shadowSize)}},_setEl:function(t){if(!t)throw"The target container doesn't exist";if(t.graph instanceof Graph)t.graph.destroy();else if(!t.clientWidth)throw"The target container must be visible";(t.graph=this).el=t}},Flotr.Graph=Graph}(),function(){function e(t){this.orientation=1,this.offset=0,this.datamin=Number.MAX_VALUE,this.datamax=-Number.MAX_VALUE,r.extend(this,t)}function l(t,e){return t=Math.log(Math.max(t,Number.MIN_VALUE)),e!==Math.E&&(t/=Math.log(e)),t}var r=Flotr._;e.prototype={setScale:function(){var o,t=this.length,e=this.max,n=this.min,s=this.offset,a=this.orientation,r=this.options,i="logarithmic"===r.scaling;o=i?t/(l(e,r.base)-l(n,r.base)):t/(e-n),this.scale=o,i?(this.d2p=function(t){return s+a*(l(t,r.base)-l(n,r.base))*o},this.p2d=function(t){return e=(s+a*t)/o+l(n,r.base),(i=r.base)===Math.E?Math.exp(e):Math.pow(i,e);var e,i}):(this.d2p=function(t){return s+a*(t-n)*o},this.p2d=function(t){return(s+a*t)/o+n})},calculateTicks:function(){var t=this.options;this.ticks=[],this.minorTicks=[],t.ticks?(this._cleanUserTicks(t.ticks,this.ticks),this._cleanUserTicks(t.minorTicks||[],this.minorTicks)):"time"==t.mode?this._calculateTimeTicks():"logarithmic"===t.scaling?this._calculateLogTicks():this._calculateTicks(),r.each(this.ticks,function(t){t.label+=""}),r.each(this.minorTicks,function(t){t.label+=""})},calculateRange:function(){if(this.used){var t=this,e=t.options,i=null!==e.min?e.min:t.datamin,o=null!==e.max?e.max:t.datamax,n=e.autoscaleMargin;if("logarithmic"==e.scaling&&(i<=0&&(i=t.datamin),o<=0&&(o=i)),o==i){var s=o?.01:1;null===e.min&&(i-=s),null===e.max&&(o+=s)}if("logarithmic"===e.scaling){i<0&&(i=o/e.base);var a=Math.log(o);e.base!=Math.E&&(a/=Math.log(e.base)),a=Math.ceil(a);var r=Math.log(i);e.base!=Math.E&&(r/=Math.log(e.base)),r=Math.ceil(r),t.tickSize=Flotr.getTickSize(e.noTicks,r,a,null===e.tickDecimals?0:e.tickDecimals),null===e.minorTickFreq&&(e.minorTickFreq=10<a-r?0:5<a-r?2:5)}else t.tickSize=Flotr.getTickSize(e.noTicks,i,o,e.tickDecimals);t.min=i,t.max=o,null===e.min&&e.autoscale&&(t.min-=t.tickSize*n,t.min<0&&0<=t.datamin&&(t.min=0),t.min=t.tickSize*Math.floor(t.min/t.tickSize)),null===e.max&&e.autoscale&&(t.max+=t.tickSize*n,0<t.max&&t.datamax<=0&&t.datamax!=t.datamin&&(t.max=0),t.max=t.tickSize*Math.ceil(t.max/t.tickSize)),t.min==t.max&&(t.max=t.min+1)}},calculateTextDimensions:function(t,e){var i,o="";if(this.options.showLabels)for(i=0;i<this.ticks.length;++i)this.ticks[i].label.length>o.length&&(o=this.ticks[i].label);this.maxLabel=t.dimensions(o,{size:e.fontSize,angle:Flotr.toRad(this.options.labelsAngle)},"font-size:smaller;","flotr-grid-label"),this.titleSize=t.dimensions(this.options.title,{size:1.2*e.fontSize,angle:Flotr.toRad(this.options.titleAngle)},"font-weight:bold;","flotr-axis-title")},_cleanUserTicks:function(t,e){var i,o,n,s,a=this.options;for(r.isFunction(t)&&(t=t({min:this.min,max:this.max})),o=0;o<t.length;++o)n="object"==typeof(s=t[o])?(i=s[0],1<s.length?s[1]:a.tickFormatter(i,{min:this.min,max:this.max})):(i=s,a.tickFormatter(i,{min:this.min,max:this.max})),e[o]={v:i,label:n}},_calculateTimeTicks:function(){this.ticks=Flotr.Date.generator(this)},_calculateLogTicks:function(){var t,e,o=this,n=o.options,s=Math.log(o.max);n.base!=Math.E&&(s/=Math.log(n.base)),s=Math.ceil(s);var a=Math.log(o.min);for(n.base!=Math.E&&(a/=Math.log(n.base)),a=Math.ceil(a),i=a;i<s;i+=o.tickSize){var r=(e=n.base==Math.E?Math.exp(i):Math.pow(n.base,i))*(n.base==Math.E?Math.exp(o.tickSize):Math.pow(n.base,o.tickSize)),l=(r-e)/n.minorTickFreq;for(o.ticks.push({v:e,label:n.tickFormatter(e,{min:o.min,max:o.max})}),t=e+l;t<r;t+=l)o.minorTicks.push({v:t,label:n.tickFormatter(t,{min:o.min,max:o.max})})}e=n.base==Math.E?Math.exp(i):Math.pow(n.base,i),o.ticks.push({v:e,label:n.tickFormatter(e,{min:o.min,max:o.max})})},_calculateTicks:function(){var t,e,i,o,n,s,a=this,r=a.options,l=a.tickSize,h=a.min,c=a.max,u=l*Math.ceil(h/l);for(r.minorTickFreq&&(e=l/r.minorTickFreq),n=0;(i=o=u+n*l)<=c;++n)if(null===(t=r.tickDecimals)&&(t=1-Math.floor(Math.log(l)/Math.LN10)),t<0&&(t=0),i=i.toFixed(t),a.ticks.push({v:i,label:r.tickFormatter(i,{min:a.min,max:a.max})}),r.minorTickFreq)for(s=0;s<r.minorTickFreq&&n*l+s*e<c;++s)i=o+s*e,a.minorTicks.push({v:i,label:r.tickFormatter(i,{min:a.min,max:a.max})})}},r.extend(e,{getAxes:function(t){return{x:new e({options:t.xaxis,n:1,length:this.plotWidth}),x2:new e({options:t.x2axis,n:2,length:this.plotWidth}),y:new e({options:t.yaxis,n:1,length:this.plotHeight,offset:this.plotHeight,orientation:-1}),y2:new e({options:t.y2axis,n:2,length:this.plotHeight,offset:this.plotHeight,orientation:-1})}}}),Flotr.Axis=e}(),function(){function i(t){o.extend(this,t)}var o=Flotr._;i.prototype={getRange:function(){var t,e,i,o=this.data,n=o.length,s=Number.MAX_VALUE,a=Number.MAX_VALUE,r=-Number.MAX_VALUE,l=-Number.MAX_VALUE,h=!1,c=!1;if(n<0||this.hide)return!1;for(i=0;i<n;i++)null!==(t=o[i][0])&&(t<s&&(s=t,h=!0),r<t&&(r=t,h=!0)),null!==(e=o[i][1])&&(e<a&&(a=e,c=!0),l<e&&(l=e,c=!0));return{xmin:s,xmax:r,ymin:a,ymax:l,xused:h,yused:c}}},o.extend(i,{getSeries:function(t){return o.map(t,function(t){var e;return t.data?(e=new i,o.extend(e,t)):e=new i({data:t}),e})}}),Flotr.Series=i}(),Flotr.addType("lines",{options:{show:!1,lineWidth:2,fill:!1,fillBorder:!1,fillColor:null,fillOpacity:.4,steps:!1,stacked:!1},stack:{values:[]},draw:function(t){var e,i=t.context,o=t.lineWidth,n=t.shadowSize;i.save(),i.lineJoin="round",n&&(i.lineWidth=n/2,e=o/2+i.lineWidth/2,i.strokeStyle="rgba(0,0,0,0.1)",this.plot(t,e+n/2,!1),i.strokeStyle="rgba(0,0,0,0.2)",this.plot(t,e,!1)),i.lineWidth=o,i.strokeStyle=t.color,this.plot(t,0,!0),i.restore()},plot:function(t,e,i){function o(){!e&&t.fill&&b&&(n=d(b[0]),u.fillStyle=t.fillStyle,u.lineTo(s,y),u.lineTo(n,y),u.lineTo(n,f(b[1])),u.fill(),t.fillBorder&&u.stroke())}var n,s,a,r,l,h,c,u=t.context,d=(t.width,t.height,t.xScale),f=t.yScale,p=t.data,g=!!t.stacked&&this.stack,m=p.length-1,x=null,v=null,y=f(0),b=null;if(!(m<1)){for(u.beginPath(),c=0;c<m;++c)null!==p[c][1]&&null!==p[c+1][1]?(n=d(p[c][0]),s=d(p[c+1][0]),null===b&&(b=p[c]),g?(l=g.values[p[c][0]]||0,h=g.values[p[c+1][0]]||g.values[p[c][0]]||0,a=f(p[c][1]+l),r=f(p[c+1][1]+h),i&&(p[c].y0=l,g.values[p[c][0]]=p[c][1]+l,c==m-1&&(p[c+1].y0=h,g.values[p[c+1][0]]=p[c+1][1]+h))):(a=f(p[c][1]),r=f(p[c+1][1])),x==n&&v==a+e||u.moveTo(n,a+e),x=s,v=r+e,t.steps?(u.lineTo(x+e/2,a+e),u.lineTo(x+e/2,v)):u.lineTo(x,v)):t.fill&&0<c&&null!==p[c][1]&&(u.stroke(),o(),b=null,u.closePath(),u.beginPath());t.fill&&(!t.fill||t.fillBorder)||u.stroke(),o(),u.closePath()}},extendYRange:function(t,e,i,o){var n=t.options;if(i.stacked&&(!n.max&&0!==n.max||!n.min&&0!==n.min)){var s,a,r=t.max,l=t.min,h=o.positiveSums||{},c=o.negativeSums||{};for(a=0;a<e.length;a++)s=e[a][0]+"",0<e[a][1]?(h[s]=(h[s]||0)+e[a][1],r=Math.max(r,h[s])):(c[s]=(c[s]||0)+e[a][1],l=Math.min(l,c[s]));o.negativeSums=c,o.positiveSums=h,t.max=r,t.min=l}i.steps&&(this.hit=function(t){var e,i=t.data,o=t.args,n=t.yScale,s=o[0],a=i.length,r=o[1],l=t.xInverse(s.relX),h=s.relY;for(e=0;e<a-1;e++)if(l>=i[e][0]&&l<=i[e+1][0]){Math.abs(n(i[e][1])-h)<8&&(r.x=i[e][0],r.y=i[e][1],r.index=e,r.seriesIndex=t.index);break}},this.drawHit=function(t){var e,i=t.context,o=t.args,n=t.data,s=t.xScale,a=o.index,r=s(o.x),l=t.yScale(o.y);n.length-1>a&&(e=t.xScale(n[a+1][0]),i.save(),i.strokeStyle=t.color,i.lineWidth=t.lineWidth,i.beginPath(),i.moveTo(r,l),i.lineTo(e,l),i.stroke(),i.closePath(),i.restore())},this.clearHit=function(t){var e,i=t.context,o=t.args,n=t.data,s=t.xScale,a=t.lineWidth,r=o.index,l=s(o.x),h=t.yScale(o.y);n.length-1>r&&(e=t.xScale(n[r+1][0]),i.clearRect(l-a,h-a,e-l+2*a,2*a))})}}),Flotr.addType("bars",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,horizontal:!1,stacked:!1,centered:!0,topPadding:.1,grouped:!1},stack:{positive:[],negative:[],_positive:[],_negative:[]},draw:function(t){var e=t.context;this.current+=1,e.save(),e.lineJoin="miter",e.lineWidth=t.lineWidth,e.strokeStyle=t.color,t.fill&&(e.fillStyle=t.fillStyle),this.plot(t),e.restore()},plot:function(t){var e,i,o,n,s,a,r=t.data,l=t.context,h=t.shadowSize;if(!(r.length<1))for(this.translate(l,t.horizontal),e=0;e<r.length;e++)null!==(i=this.getBarGeometry(r[e][0],r[e][1],t))&&(o=i.left,n=i.top,s=i.width,a=i.height,t.fill&&l.fillRect(o,n,s,a),h&&(l.save(),l.fillStyle="rgba(0,0,0,0.05)",l.fillRect(o+h,n+h,s,a),l.restore()),t.lineWidth&&l.strokeRect(o,n,s,a))},translate:function(t,e){e&&(t.rotate(-Math.PI/2),t.scale(-1,1))},getBarGeometry:function(t,e,i){var o,n,s,a,r,l=i.horizontal,h=i.barWidth,c=i.centered,u=!!i.stacked&&this.stack,d=i.lineWidth,f=c?h/2:0,p=l?i.yScale:i.xScale,g=l?i.xScale:i.yScale,m=l?e:t,x=l?t:e,v=0;return i.grouped&&(this.current,this.groups,m-=f,f=(h/=this.groups)/2,m=m+h*this.current-f),u&&(v=(o=0<x?u.positive:u.negative)[m]||v,o[m]=v+x),n=p(m-f),s=p(m+h-f),a=g(x+v),(r=g(v))<0&&(r=0),null===t||null===e?null:{x:m,y:x,xScale:p,yScale:g,top:a,left:Math.min(n,s)-d/2,width:Math.abs(s-n)-d,height:r-a}},hit:function(t){var e,i,o=t.data,n=t.args,s=n[0],a=n[1],r=t.xInverse(s.relX),l=t.yInverse(s.relY),h=this.getBarGeometry(r,l,t),c=h.width/2,u=h.left,d=h.y;for(i=o.length;i--;)e=this.getBarGeometry(o[i][0],o[i][1],t),(0<d&&d<e.y||d<0&&d>e.y)&&Math.abs(u-e.left)<c&&(a.x=o[i][0],a.y=o[i][1],a.index=i,a.seriesIndex=t.index)},drawHit:function(t){var e=t.context,i=t.args,o=this.getBarGeometry(i.x,i.y,t),n=o.left,s=o.top,a=o.width,r=o.height;e.save(),e.strokeStyle=t.color,e.lineWidth=t.lineWidth,this.translate(e,t.horizontal),e.beginPath(),e.moveTo(n,s+r),e.lineTo(n,s),e.lineTo(n+a,s),e.lineTo(n+a,s+r),t.fill&&(e.fillStyle=t.fillStyle,e.fill()),e.stroke(),e.closePath(),e.restore()},clearHit:function(t){var e=t.context,i=t.args,o=this.getBarGeometry(i.x,i.y,t),n=o.left,s=o.width,a=o.top,r=o.height,l=2*t.lineWidth;e.save(),this.translate(e,t.horizontal),e.clearRect(n-l,Math.min(a,a+r)-l,s+2*l,Math.abs(r)+2*l),e.restore()},extendXRange:function(t,e,i,o){this._extendRange(t,e,i,o),this.groups=this.groups+1||1,this.current=0},extendYRange:function(t,e,i,o){this._extendRange(t,e,i,o)},_extendRange:function(t,e,i,o){var n=t.options.max;if(!_.isNumber(n)&&!_.isString(n)){var s,a,r,l=t.min,h=t.max,c=i.horizontal,u=t.orientation,d=this.positiveSums||{},f=this.negativeSums||{};if((1==u&&!c||-1==u&&c)&&i.centered&&(h=Math.max(t.datamax+i.barWidth,h),l=Math.min(t.datamin-i.barWidth,l)),i.stacked&&(1==u&&c||-1==u&&!c))for(r=e.length;r--;)s=e[r][1==u?1:0]+"",0<(a=e[r][1==u?0:1])?(d[s]=(d[s]||0)+a,h=Math.max(h,d[s])):(f[s]=(f[s]||0)+a,l=Math.min(l,f[s]));(1==u&&c||-1==u&&!c)&&i.topPadding&&(t.max===t.datamax||i.stacked&&this.stackMax!==h)&&(h+=i.topPadding*(h-l)),this.stackMin=l,this.stackMax=h,this.negativeSums=f,this.positiveSums=d,t.max=h,t.min=l}}}),Flotr.addType("bubbles",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,baseRadius:2},draw:function(t){var e=t.context,i=t.shadowSize;e.save(),e.lineWidth=t.lineWidth,e.fillStyle="rgba(0,0,0,0.05)",e.strokeStyle="rgba(0,0,0,0.05)",this.plot(t,i/2),e.strokeStyle="rgba(0,0,0,0.1)",this.plot(t,i/4),e.strokeStyle=t.color,e.fillStyle=t.fillStyle,this.plot(t),e.restore()},plot:function(t,e){var i,o,n=t.data,s=t.context;for(e=e||0,o=0;o<n.length;++o)i=this.getGeometry(n[o],t),s.beginPath(),s.arc(i.x+e,i.y+e,i.z,0,2*Math.PI,!0),s.stroke(),t.fill&&s.fill(),s.closePath()},getGeometry:function(t,e){return{x:e.xScale(t[0]),y:e.yScale(t[1]),z:t[2]*e.baseRadius}},hit:function(t){var e,o,n,s=t.data,a=t.args,r=a[0],l=a[1],h=r.relX,c=r.relY;for(l.best=l.best||Number.MAX_VALUE,i=s.length;i--;)o=(e=this.getGeometry(s[i],t)).x-h,n=e.y-c,Math.sqrt(o*o+n*n)<e.z&&e.z<l.best&&(l.x=s[i][0],l.y=s[i][1],l.index=i,l.seriesIndex=t.index,l.best=e.z)},drawHit:function(t){var e=t.context,i=this.getGeometry(t.data[t.args.index],t);e.save(),e.lineWidth=t.lineWidth,e.fillStyle=t.fillStyle,e.strokeStyle=t.color,e.beginPath(),e.arc(i.x,i.y,i.z,0,2*Math.PI,!0),e.fill(),e.stroke(),e.closePath(),e.restore()},clearHit:function(t){var e=t.context,i=this.getGeometry(t.data[t.args.index],t),o=i.z+t.lineWidth;e.save(),e.clearRect(i.x-o,i.y-o,2*o,2*o),e.restore()}}),Flotr.addType("candles",{options:{show:!1,lineWidth:1,wickLineWidth:1,candleWidth:.6,fill:!0,upFillColor:"#00A8F0",downFillColor:"#CB4B4B",fillOpacity:.5,barcharts:!1},draw:function(t){var e=t.context;e.save(),e.lineJoin="miter",e.lineCap="butt",e.lineWidth=t.wickLineWidth||t.lineWidth,this.plot(t),e.restore()},plot:function(t){var e,i,o,n,s,a,r,l,h,c,u,d,f,p,g,m=t.data,x=t.context,v=t.xScale,y=t.yScale,b=t.candleWidth/2,w=t.shadowSize,M=t.lineWidth,k=t.wickLineWidth,S=k%2/2;if(!(m.length<1))for(g=0;g<m.length;g++)o=(i=m[g])[0],n=i[1],s=i[2],a=i[3],r=i[4],l=v(o-b),h=v(o+b),c=y(a),u=y(s),d=y(Math.min(n,r)),f=y(Math.max(n,r)),e=t[r<n?"downFillColor":"upFillColor"],t.fill&&!t.barcharts&&(x.fillStyle="rgba(0,0,0,0.05)",x.fillRect(l+w,f+w,h-l,d-f),x.save(),x.globalAlpha=t.fillOpacity,x.fillStyle=e,x.fillRect(l,f+M,h-l,d-f),x.restore()),(M||k)&&(o=Math.floor((l+h)/2)+S,x.strokeStyle=e,x.beginPath(),t.barcharts?(x.moveTo(o,Math.floor(u+M)),x.lineTo(o,Math.floor(c+M)),p=n<r,x.moveTo(p?h:l,Math.floor(f+M)),x.lineTo(o,Math.floor(f+M)),x.moveTo(o,Math.floor(d+M)),x.lineTo(p?l:h,Math.floor(d+M))):(x.strokeRect(l,f+M,h-l,d-f),x.moveTo(o,Math.floor(f+M)),x.lineTo(o,Math.floor(u+M)),x.moveTo(o,Math.floor(d+M)),x.lineTo(o,Math.floor(c+M))),x.closePath(),x.stroke())},hit:function(t){var e,i,o,n,s,a,r,l,h=t.xScale,c=t.yScale,u=t.data,d=t.args,f=d[0],p=t.candleWidth/2,g=d[1],m=f.relX,x=f.relY,v=u.length;for(e=0;e<v;e++)if(o=(i=u[e])[2],n=i[3],s=h(i[0]-p),a=h(i[0]+p),l=c(n),r=c(o),s<m&&m<a&&r<x&&x<l)return g.x=i[0],g.index=e,void(g.seriesIndex=t.index)},drawHit:function(t){var e=t.context;e.save(),this.plot(_.defaults({fill:!!t.fillColor,upFillColor:t.color,downFillColor:t.color,data:[t.data[t.args.index]]},t)),e.restore()},clearHit:function(t){var e=t.args,i=t.context,o=t.xScale,n=t.yScale,s=t.lineWidth,a=t.candleWidth/2,r=t.data[e.index],l=o(r[0]-a)-s,h=o(r[0]+a)+s,c=n(r[2]),u=n(r[3])+s;i.clearRect(l,c,h-l,u-c)},extendXRange:function(t,e,i){null===t.options.max&&(t.max=Math.max(t.datamax+.5,t.max),t.min=Math.min(t.datamin-.5,t.min))}}),Flotr.addType("gantt",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,centered:!0},draw:function(t){var e=this.ctx,i=t.gantt.barWidth,o=Math.min(t.gantt.lineWidth,i);if(e.save(),e.translate(this.plotOffset.left,this.plotOffset.top),e.lineJoin="miter",e.lineWidth=o,e.strokeStyle=t.color,e.save(),this.gantt.plotShadows(t,i,0,t.gantt.fill),e.restore(),t.gantt.fill){var n=t.gantt.fillColor||t.color;e.fillStyle=this.processColor(n,{opacity:t.gantt.fillOpacity})}this.gantt.plot(t,i,0,t.gantt.fill),e.restore()},plot:function(t,e,i,o){var n=t.data;if(!(n.length<1)){var s,a=t.xaxis,r=t.yaxis,l=this.ctx;for(s=0;s<n.length;s++){var h=n[s][0],c=n[s][1],u=n[s][2],d=!0,f=!0;if(null!==c&&null!==u){var p=c,g=c+u,m=h-(t.gantt.centered?e/2:0),x=h+e-(t.gantt.centered?e/2:0);g<a.min||p>a.max||x<r.min||m>r.max||(p<a.min&&(p=a.min,d=!1),g>a.max&&(g=a.max,a.lastSerie!=t&&(f=!1)),m<r.min&&(m=r.min),x>r.max&&(x=r.max,r.lastSerie!=t&&(f=!1)),o&&(l.beginPath(),l.moveTo(a.d2p(p),r.d2p(m)+i),l.lineTo(a.d2p(p),r.d2p(x)+i),l.lineTo(a.d2p(g),r.d2p(x)+i),l.lineTo(a.d2p(g),r.d2p(m)+i),l.fill(),l.closePath()),t.gantt.lineWidth&&(l.beginPath(),l.moveTo(a.d2p(p),r.d2p(m)+i),l[d?"lineTo":"moveTo"](a.d2p(p),r.d2p(x)+i),l[f?"lineTo":"moveTo"](a.d2p(g),r.d2p(x)+i),l.lineTo(a.d2p(g),r.d2p(m)+i),l.stroke(),l.closePath()))}}}},plotShadows:function(t,e,i){var o=t.data;if(!(o.length<1)){var n,s,a,r,l=t.xaxis,h=t.yaxis,c=this.ctx,u=this.options.shadowSize;for(n=0;n<o.length;n++)if(s=o[n][0],a=o[n][1],r=o[n][2],null!==a&&null!==r){var d=a,f=a+r,p=s-(t.gantt.centered?e/2:0),g=s+e-(t.gantt.centered?e/2:0);if(!(f<l.min||d>l.max||g<h.min||p>h.max)){d<l.min&&(d=l.min),f>l.max&&(f=l.max),p<h.min&&(p=h.min),g>h.max&&(g=h.max);var m=l.d2p(f)-l.d2p(d)-(l.d2p(f)+u<=this.plotWidth?0:u),x=h.d2p(p)-h.d2p(g)-(h.d2p(p)+u<=this.plotHeight?0:u);c.fillStyle="rgba(0,0,0,0.05)",c.fillRect(Math.min(l.d2p(d)+u,this.plotWidth),Math.min(h.d2p(g)+u,this.plotHeight),m,x)}}}},extendXRange:function(t){if(null===t.options.max){var e,i,o,n,s=t.min,a=t.max,r={},l=null;for(e=0;e<this.series.length;++e)if((n=(o=this.series[e]).gantt).show&&o.xaxis==t){for(i=0;i<o.data.length;i++)n.show&&(y=o.data[i][0]+"",r[y]=Math.max(r[y]||0,o.data[i][1]+o.data[i][2]),l=o);for(i in r)a=Math.max(r[i],a)}t.lastSerie=l,t.max=a,t.min=s}},extendYRange:function(t){if(null===t.options.max){var e,i,o,n,s=Number.MIN_VALUE,a=Number.MAX_VALUE;for(e=0;e<this.series.length;++e)if((n=(o=this.series[e]).gantt).show&&!o.hide&&o.yaxis==t){var r=Number.MIN_VALUE,l=Number.MAX_VALUE;for(i=0;i<o.data.length;i++)r=Math.max(r,o.data[i][0]),l=Math.min(l,o.data[i][0]);a=n.centered?(s=Math.max(r+.5,s),Math.min(l-.5,a)):(s=Math.max(r+1,s),Math.min(l,a)),n.barWidth+r>s&&(s=t.max+n.barWidth)}t.lastSerie=null,t.max=s,t.min=a,t.tickSize=Flotr.getTickSize(t.options.noTicks,a,s,t.options.tickDecimals)}}}),function(){function l(t){return"object"==typeof t&&t.constructor&&(!!Image||t.constructor===Image)}Flotr.defaultMarkerFormatter=function(t){return Math.round(100*t.y)/100+""},Flotr.addType("markers",{options:{show:!1,lineWidth:1,color:"#000000",fill:!1,fillColor:"#FFFFFF",fillOpacity:.4,stroke:!1,position:"ct",verticalMargin:0,labelFormatter:Flotr.defaultMarkerFormatter,fontSize:Flotr.defaultOptions.fontSize,stacked:!1,stackingType:"b",horizontal:!1},stack:{positive:[],negative:[],values:[]},draw:function(t){function e(t,e){return o=u.negative[t]||0,i=u.positive[t]||0,0<e?(u.positive[t]=o+e,o+e):(u.negative[t]=i+e,i+e)}var i,o,n,s,a,r,l,h=t.data,c=t.context,u=!!t.stacked&&t.stack,d=t.stackingType;for(c.save(),c.lineJoin="round",c.lineWidth=t.lineWidth,c.strokeStyle="rgba(0,0,0,0.5)",c.fillStyle=t.fillStyle,s=0;s<h.length;++s)a=h[s][0],r=h[s][1],u&&("b"==d?t.horizontal?r=e(r,a):a=e(a,r):"a"==d&&(n=u.values[a]||0,u.values[a]=n+r,r=n+r)),l=t.labelFormatter({x:a,y:r,index:s,data:h}),this.plot(t.xScale(a),t.yScale(r),l,t);c.restore()},plot:function(t,e,i,o){o.context;if(l(i)&&!i.complete)throw"Marker image not loaded.";this._plot(t,e,i,o)},_plot:function(t,e,i,o){var n,s=o.context,a=t,r=e;(n=l(i)?{height:i.height,width:i.width}:o.text.canvas(i)).width=Math.floor(n.width+4),n.height=Math.floor(n.height+4),-1!=o.position.indexOf("c")?a-=n.width/2+2:-1!=o.position.indexOf("l")&&(a-=n.width),-1!=o.position.indexOf("m")?r-=n.height/2+2:-1!=o.position.indexOf("t")?r-=n.height+o.verticalMargin:r+=o.verticalMargin,a=Math.floor(a)+.5,r=Math.floor(r)+.5,o.fill&&s.fillRect(a,r,n.width,n.height),o.stroke&&s.strokeRect(a,r,n.width,n.height),l(i)?s.drawImage(i,parseInt(a+2,10),parseInt(r+2,10)):Flotr.drawText(s,i,a+2,r+2,{textBaseline:"top",textAlign:"left",size:o.fontSize,color:o.color})}})}(),function(){Flotr._;Flotr.defaultPieLabelFormatter=function(t,e){return(100*e/t).toFixed(2)+"%"},Flotr.addType("pie",{options:{show:!1,lineWidth:1,fill:!0,fillColor:null,fillOpacity:.6,explode:6,sizeRatio:.6,startAngle:Math.PI/4,labelFormatter:Flotr.defaultPieLabelFormatter,pie3D:!1,pie3DviewAngle:Math.PI/2*.8,pie3DspliceThickness:20,epsilon:.1},draw:function(t){var e,i,o,n=t.data,s=t.context,a=t.lineWidth,r=t.shadowSize,l=t.sizeRatio,h=t.height,c=t.width,u=t.explode,d=t.color,f=t.fill,p=t.fillStyle,g=Math.min(c,h)*l/2,m=n[0][1],x=[],v=2*Math.PI*m/this.total,y=this.startAngle||2*Math.PI*t.startAngle,b=y+v,w=y+v/2,M=t.labelFormatter(this.total,m),k=u+g+4,S=Math.cos(w)*k,T=Math.sin(w)*k,F=S<0?"right":"left",A=0<T?"top":"bottom";if(s.save(),s.translate(c/2,h/2),s.scale(1,1),i=Math.cos(w)*u,o=Math.sin(w)*u,0<r&&(this.plotSlice(i+r,o+r,g,y,b,s),f&&(s.fillStyle="rgba(0,0,0,0.1)",s.fill())),this.plotSlice(i,o,g,y,b,s),f&&(s.fillStyle=p,s.fill()),s.lineWidth=a,s.strokeStyle=d,s.stroke(),e={size:1.2*t.fontSize,color:t.fontColor,weight:1.5},M&&(t.htmlText||!t.textEnabled?(divStyle="position:absolute;"+A+":"+(h/2+("top"==A?T:-T))+"px;",divStyle+=F+":"+(c/2+("right"==F?-S:S))+"px;",x.push('<div style="',divStyle,'" class="flotr-grid-label">',M,"</div>")):(e.textAlign=F,e.textBaseline=A,Flotr.drawText(s,M,S,T,e))),t.htmlText||!t.textEnabled){var O=Flotr.DOM.node('<div style="color:'+t.fontColor+'" class="flotr-labels"></div>');Flotr.DOM.insert(O,x.join("")),Flotr.DOM.insert(t.element,O)}s.restore(),this.startAngle=b,this.slices=this.slices||[],this.slices.push({radius:g,x:i,y:o,explode:u,start:y,end:b})},plotSlice:function(t,e,i,o,n,s){s.beginPath(),s.moveTo(t,e),s.arc(t,e,i,o,n,!1),s.lineTo(t,e),s.closePath()},hit:function(t){var e=t.data[0],i=t.args,o=t.index,n=i[0],s=i[1],a=this.slices[o],r=n.relX-t.width/2,l=n.relY-t.height/2,h=Math.sqrt(r*r+l*l),c=Math.atan(l/r),u=2*Math.PI,d=a.explode||t.explode,f=a.start%u,p=a.end%u,g=t.epsilon;r<0?c+=Math.PI:0<r&&l<0&&(c+=u),h<a.radius+d&&d<h&&(f<c&&c<p||p<f&&(c<p||f<c)||f==p&&(a.start===a.end&&Math.abs(c-f)<g||a.start!==a.end&&Math.abs(c-f)>g))&&(s.x=e[0],s.y=e[1],s.sAngle=f,s.eAngle=p,s.index=0,s.seriesIndex=o,s.fraction=e[1]/this.total)},drawHit:function(t){var e=t.context,i=this.slices[t.args.seriesIndex];e.save(),e.translate(t.width/2,t.height/2),this.plotSlice(i.x,i.y,i.radius,i.start,i.end,e),e.stroke(),e.restore()},clearHit:function(t){var e=t.context,i=this.slices[t.args.seriesIndex],o=2*t.lineWidth,n=i.radius+o;e.save(),e.translate(t.width/2,t.height/2),e.clearRect(i.x-n,i.y-n,2*n+o,2*n+o),e.restore()},extendYRange:function(t,e){this.total=(this.total||0)+e[0][1]}})}(),Flotr.addType("points",{options:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#FFFFFF",fillOpacity:1,hitRadius:null},draw:function(t){var e=t.context,i=(t.lineWidth,t.shadowSize);e.save(),0<i&&(e.lineWidth=i/2,e.strokeStyle="rgba(0,0,0,0.1)",this.plot(t,i/2+e.lineWidth/2),e.strokeStyle="rgba(0,0,0,0.2)",this.plot(t,e.lineWidth/2)),e.lineWidth=t.lineWidth,e.strokeStyle=t.color,t.fill&&(e.fillStyle=t.fillStyle),this.plot(t),e.restore()},plot:function(t,e){var i,o,n,s=t.data,a=t.context,r=t.xScale,l=t.yScale;for(i=s.length-1;-1<i;--i)null!==(n=s[i][1])&&(o=r(s[i][0]),n=l(n),o<0||o>t.width||n<0||n>t.height||(a.beginPath(),e?a.arc(o,n+e,t.radius,0,Math.PI,!1):(a.arc(o,n,t.radius,0,2*Math.PI,!0),t.fill&&a.fill()),a.stroke(),a.closePath()))}}),Flotr.addType("radar",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,radiusRatio:.9,sensibility:2},draw:function(t){var e=t.context,i=t.shadowSize;e.save(),e.translate(t.width/2,t.height/2),e.lineWidth=t.lineWidth,e.fillStyle="rgba(0,0,0,0.05)",e.strokeStyle="rgba(0,0,0,0.05)",this.plot(t,i/2),e.strokeStyle="rgba(0,0,0,0.1)",this.plot(t,i/4),e.strokeStyle=t.color,e.fillStyle=t.fillStyle,this.plot(t),e.restore()},plot:function(t,e){var i,o,n=t.data,s=t.context,a=Math.min(t.height,t.width)*t.radiusRatio/2,r=2*Math.PI/n.length,l=-Math.PI/2;for(e=e||0,s.beginPath(),i=0;i<n.length;++i)o=n[i][1]/this.max,s[0===i?"moveTo":"lineTo"](Math.cos(i*r+l)*a*o+e,Math.sin(i*r+l)*a*o+e);s.closePath(),t.fill&&s.fill(),s.stroke()},getGeometry:function(t,e){var i=Math.min(e.height,e.width)*e.radiusRatio/2,o=2*Math.PI/e.data.length,n=-Math.PI/2,s=t[1]/this.max;return{x:Math.cos(t[0]*o+n)*i*s+e.width/2,y:Math.sin(t[0]*o+n)*i*s+e.height/2}},hit:function(t){for(var e,i,o,n=t.args,s=n[0],a=n[1],r=s.relX,l=s.relY,h=0;h<a.series.length;h++)for(var c=a.series[h].data,u=c.length;u--;)if(i=(e=this.getGeometry(c[u],t)).x-r,o=e.y-l,Math.sqrt(i*i+o*o)<2*t.sensibility)return a.x=c[u][0],a.y=c[u][1],a.index=u,a.seriesIndex=h,a},drawHit:function(t){var e=2*Math.PI/t.data.length,i=-Math.PI/2,o=Math.min(t.height,t.width)*t.radiusRatio/2,n=t.args.series,s=n.points.hitRadius||n.points.radius||n.mouse.radius,a=t.context;a.translate(t.width/2,t.height/2);var r=t.args.index,l=t.data[r][1]/this.max,h=Math.cos(r*e+i)*o*l,c=Math.sin(r*e+i)*o*l;a.beginPath(),a.arc(h,c,s,0,2*Math.PI,!0),a.closePath(),a.stroke()},clearHit:function(t){var e=2*Math.PI/t.data.length,i=-Math.PI/2,o=Math.min(t.height,t.width)*t.radiusRatio/2,n=t.context,s=t.args.series,a=s.points?s.points.lineWidth:1;offset=(s.points.hitRadius||s.points.radius||s.mouse.radius)+a,n.translate(t.width/2,t.height/2);var r=t.args.index,l=t.data[r][1]/this.max,h=Math.cos(r*e+i)*o*l,c=Math.sin(r*e+i)*o*l;n.clearRect(h-offset,c-offset,2*offset,2*offset)},extendYRange:function(t,e){this.max=Math.max(t.max,this.max||-Number.MAX_VALUE)}}),Flotr.addType("timeline",{options:{show:!1,lineWidth:1,barWidth:.2,fill:!0,fillColor:null,fillOpacity:.4,centered:!0},draw:function(t){var e=t.context;e.save(),e.lineJoin="miter",e.lineWidth=t.lineWidth,e.strokeStyle=t.color,e.fillStyle=t.fillStyle,this.plot(t),e.restore()},plot:function(t){var e=t.data,u=t.context,d=t.xScale,f=t.yScale,p=t.barWidth,g=t.lineWidth;Flotr._.each(e,function(t){var e=t[0],i=t[1],o=t[2],n=p,s=Math.ceil(d(e)),a=Math.ceil(d(e+o))-s,r=Math.round(f(i)),l=Math.round(f(i-n))-r,h=s-g/2,c=Math.round(r-l/2)-g/2;u.strokeRect(h,c,a,l),u.fillRect(h,c,a,l)})},extendRange:function(t){var e=t.data,i=t.xaxis,o=t.yaxis,n=t.timeline.barWidth;if(null===i.options.min&&(i.min=i.datamin-n/2),null===i.options.max){var s=i.max;Flotr._.each(e,function(t){s=Math.max(s,t[0]+t[2])},this),i.max=s+n/2}null===o.options.min&&(o.min=o.datamin-n),null===o.options.min&&(o.max=o.datamax+n)}}),function(){var a=Flotr.DOM;Flotr.addPlugin("crosshair",{options:{mode:null,color:"#FF0000",hideCursor:!0},callbacks:{"flotr:mousemove":function(t,e){this.options.crosshair.mode&&(this.crosshair.clearCrosshair(),this.crosshair.drawCrosshair(e))}},drawCrosshair:function(t){var e=this.octx,i=this.options.crosshair,o=this.plotOffset,n=o.left+Math.round(t.relX)+.5,s=o.top+Math.round(t.relY)+.5;if(t.relX<0||t.relY<0||t.relX>this.plotWidth||t.relY>this.plotHeight)return this.el.style.cursor=null,void a.removeClass(this.el,"flotr-crosshair");i.hideCursor&&(this.el.style.cursor="none",a.addClass(this.el,"flotr-crosshair")),e.save(),e.strokeStyle=i.color,e.lineWidth=1,e.beginPath(),-1!=i.mode.indexOf("x")&&(e.moveTo(n,o.top),e.lineTo(n,o.top+this.plotHeight)),-1!=i.mode.indexOf("y")&&(e.moveTo(o.left,s),e.lineTo(o.left+this.plotWidth,s)),e.stroke(),e.restore()},clearCrosshair:function(){var t=this.plotOffset,e=this.lastMousePos,i=this.octx;e&&(i.clearRect(Math.round(e.relX)+t.left,t.top,1,this.plotHeight+1),i.clearRect(t.left,Math.round(e.relY)+t.top,this.plotWidth+1,1))}})}(),function(){var g=Flotr.DOM,m=Flotr._;Flotr.addPlugin("download",{saveImage:function(t,e,i,o){var n,s=this.options.grid;if(Flotr.isIE&&Flotr.isIE<9)return n="<html><body>"+this.canvas.firstChild.innerHTML+"</body></html>",window.open().document.write(n);if("jpeg"===t||"png"===t){var a,r,l,h,c,u,d,f,p;if(a=t,r=this.canvas,l=this.ctx,h=this.canvasWidth,c=this.canvasHeight,u=s&&s.backgroundColor||"#ffffff",d="image/"+a,f=l.getImageData(0,0,h,c),p=new Image,l.save(),l.globalCompositeOperation="destination-over",l.fillStyle=u,l.fillRect(0,0,h,c),p.src=r.toDataURL(d),l.restore(),l.clearRect(0,0,h,c),l.putImageData(f,0,0),n=p,!m.isElement(n)||!o)return window.open(n.src);this.download.restoreCanvas(),g.hide(this.canvas),g.hide(this.overlay),g.setStyles({position:"absolute"}),g.insert(this.el,n),this.saveImageElement=n}},restoreCanvas:function(){g.show(this.canvas),g.show(this.overlay),this.saveImageElement&&this.el.removeChild(this.saveImageElement),this.saveImageElement=null}})}(),function(){var b=Flotr.EventAdapter,w=Flotr._;Flotr.addPlugin("graphGrid",{callbacks:{"flotr:beforedraw":function(){this.graphGrid.drawGrid()},"flotr:afterdraw":function(){this.graphGrid.drawOutline()}},drawGrid:function(){function t(t){for(s=0;s<t.length;++s){var e=t[s].v/n.max;for(a=0;a<=x;++a)r[0===a?"moveTo":"lineTo"](Math.cos(a*v+y)*m*e,Math.sin(a*v+y)*m*e)}}function e(t,e){w.each(w.pluck(t,"v"),function(t){t<=n.min||t>=n.max||(t==n.min||t==n.max)&&h.outlineWidth||e(Math.floor(n.d2p(t))+r.lineWidth/2)})}function i(t){r.moveTo(t,0),r.lineTo(t,p)}function o(t){r.moveTo(0,t),r.lineTo(g,t)}var n,s,a,r=this.ctx,l=this.options,h=l.grid,c=h.verticalLines,u=h.horizontalLines,d=h.minorVerticalLines,f=h.minorHorizontalLines,p=this.plotHeight,g=this.plotWidth;if((c||d||u||f)&&b.fire(this.el,"flotr:beforegrid",[this.axes.x,this.axes.y,l,this]),r.save(),r.lineWidth=1,r.strokeStyle=h.tickColor,h.circular){r.translate(this.plotOffset.left+g/2,this.plotOffset.top+p/2);var m=Math.min(p,g)*l.radar.radiusRatio/2,x=this.axes.x.ticks.length,v=Math.PI/x*2,y=-Math.PI/2;r.beginPath(),n=this.axes.y,u&&t(n.ticks),f&&t(n.minorTicks),c&&w.times(x,function(t){r.moveTo(0,0),r.lineTo(Math.cos(t*v+y)*m,Math.sin(t*v+y)*m)}),r.stroke()}else r.translate(this.plotOffset.left,this.plotOffset.top),h.backgroundColor&&(r.fillStyle=this.processColor(h.backgroundColor,{x1:0,y1:0,x2:g,y2:p}),r.fillRect(0,0,g,p)),r.beginPath(),n=this.axes.x,c&&e(n.ticks,i),d&&e(n.minorTicks,i),n=this.axes.y,u&&e(n.ticks,o),f&&e(n.minorTicks,o),r.stroke();r.restore(),(c||d||u||f)&&b.fire(this.el,"flotr:aftergrid",[this.axes.x,this.axes.y,l,this])},drawOutline:function(){var t,e,o,n,s=this,a=s.options,r=a.grid,l=r.outline,h=s.ctx,c=r.backgroundImage,u=s.plotOffset,d=u.left,f=u.top,p=s.plotWidth,g=s.plotHeight;if(r.outlineWidth){if(h.save(),r.circular){h.translate(d+p/2,f+g/2);var m=Math.min(g,p)*a.radar.radiusRatio/2,x=this.axes.x.ticks.length,v=Math.PI/x*2,y=-Math.PI/2;for(h.beginPath(),h.lineWidth=r.outlineWidth,h.strokeStyle=r.color,h.lineJoin="round",i=0;i<=x;++i)h[0===i?"moveTo":"lineTo"](Math.cos(i*v+y)*m,Math.sin(i*v+y)*m);h.stroke()}else{h.translate(d,f);var b=r.outlineWidth,w=.5-b+(b+1)%2/2,M="lineTo",k="moveTo";h.lineWidth=b,h.strokeStyle=r.color,h.lineJoin="miter",h.beginPath(),h.moveTo(w,w),p-=b/2%1,g+=b/2,h[-1!==l.indexOf("n")?M:k](p,w),h[-1!==l.indexOf("e")?M:k](p,g),h[-1!==l.indexOf("s")?M:k](w,g),h[-1!==l.indexOf("w")?M:k](w,w),h.stroke(),h.closePath()}h.restore(),c&&(e=c.src||c,o=(parseInt(c.left,10)||0)+u.left,n=(parseInt(c.top,10)||0)+u.top,(t=new Image).onload=function(){h.save(),c.alpha&&(h.globalAlpha=c.alpha),h.globalCompositeOperation="destination-over",h.drawImage(t,0,0,t.width,t.height,o,n,p,g),h.restore()},t.src=e)}}})}(),function(){var k=Flotr.DOM,S=Flotr._,r=Flotr;Flotr.addPlugin("hit",{callbacks:{"flotr:mousemove":function(t,e){this.hit.track(e)},"flotr:click":function(t){var e=this.hit.track(t);e&&!S.isUndefined(e.index)&&(t.hit=e)},"flotr:mouseout":function(t){t.relatedTarget!==this.mouseTrack&&this.hit.clearHit()},"flotr:destroy":function(){this.options.mouse.container&&k.remove(this.mouseTrack),this.mouseTrack=null}},track:function(t){if(this.options.mouse.track||S.any(this.series,function(t){return t.mouse&&t.mouse.track}))return this.hit.hit(t)},executeOnType:function(t,o,n){var s,a=!1;return S.isArray(t)||(t=[t]),S.each(t,function(e,i){S.each(S.keys(r.graphTypes),function(t){e[t]&&e[t].show&&!e.hide&&this[t][o]&&((s=this.getOptions(e,t)).fill=!!e.mouse.fillColor,s.fillStyle=this.processColor(e.mouse.fillColor||"#ffffff",{opacity:e.mouse.fillOpacity}),s.color=e.mouse.lineColor,s.context=this.octx,s.index=i,n&&(s.args=n),this[t][o].call(this[t],s),a=!0)},this)},this),a},drawHit:function(t){var e=this.octx,i=t.series;if(i.mouse.lineColor){if(e.save(),e.lineWidth=i.points?i.points.lineWidth:1,e.strokeStyle=i.mouse.lineColor,e.fillStyle=this.processColor(i.mouse.fillColor||"#ffffff",{opacity:i.mouse.fillOpacity}),e.translate(this.plotOffset.left,this.plotOffset.top),!this.hit.executeOnType(i,"drawHit",t)){var o=t.xaxis,n=t.yaxis;e.beginPath(),e.arc(o.d2p(t.x),n.d2p(t.y),i.points.hitRadius||i.points.radius||i.mouse.radius,0,2*Math.PI,!0),e.fill(),e.stroke(),e.closePath()}e.restore(),this.clip(e)}this.prevHit=t},clearHit:function(){var t=this.prevHit,e=this.octx,i=this.plotOffset;if(e.save(),e.translate(i.left,i.top),t){if(!this.hit.executeOnType(t.series,"clearHit",this.prevHit)){var o=t.series,n=o.points?o.points.lineWidth:1;offset=(o.points.hitRadius||o.points.radius||o.mouse.radius)+n,e.clearRect(t.xaxis.d2p(t.x)-offset,t.yaxis.d2p(t.y)-offset,2*offset,2*offset)}k.hide(this.mouseTrack),this.prevHit=null}e.restore()},hit:function(t){var e,i,o,n,s,a,r,l=this.options,h=this.prevHit;if(0!==this.series.length)return r={relX:t.relX,relY:t.relY,absX:t.absX,absY:t.absY,series:this.series},l.mouse.trackY&&!l.mouse.trackAll&&this.hit.executeOnType(this.series,"hit",[t,r])&&!S.isUndefined(r.seriesIndex)?(n=this.series[r.seriesIndex],r.series=n,r.mouse=n.mouse,r.xaxis=n.xaxis,r.yaxis=n.yaxis):(e=this.hit.closest(t))&&(o=(e=l.mouse.trackY?e.point:e.x).seriesIndex,s=(n=this.series[o]).xaxis,a=n.yaxis,i=2*n.mouse.sensibility,(l.mouse.trackAll||e.distanceX<i/s.scale&&(!l.mouse.trackY||e.distanceY<i/a.scale))&&(r.series=n,r.xaxis=n.xaxis,r.yaxis=n.yaxis,r.mouse=n.mouse,r.x=e.x,r.y=e.y,r.dist=e.distance,r.index=e.dataIndex,r.seriesIndex=o)),h&&h.index===r.index&&h.seriesIndex===r.seriesIndex||(this.hit.clearHit(),r.series&&r.mouse&&r.mouse.track&&(this.hit.drawMouseTrack(r),this.hit.drawHit(r),Flotr.EventAdapter.fire(this.el,"flotr:hit",[r,this]))),r},closest:function(t){function e(t){t.distance=n,t.distanceX=s,t.distanceY=a,t.seriesIndex=u,t.dataIndex=d,t.x=h,t.y=c,b=!0}var i,o,n,s,a,r,l,h,c,u,d,f=this.series,p=(this.options,t.relX),g=t.relY,m=Number.MAX_VALUE,x=Number.MAX_VALUE,v={},y={},b=!1;for(u=0;u<f.length;u++)if(o=(i=f[u]).data,r=i.xaxis.p2d(p),l=i.yaxis.p2d(g),!i.hide)for(d=o.length;d--;)h=o[d][0],c=o[d][1],o[d].y0&&(c+=o[d].y0),null!==h&&null!==c&&(h<i.xaxis.min||h>i.xaxis.max||(s=Math.abs(h-r),a=Math.abs(c-l),(n=s*s+a*a)<m&&(m=n,e(v)),s<x&&(x=s,e(y))));return!!b&&{point:v,x:y}},drawMouseTrack:function(t){var e,i,o,n="",s=t.series,a=t.mouse.position,r=t.mouse.margin,l=t.x,h=t.y,c="opacity:0.7;background-color:#000;color:#fff;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;",u=this.mouseTrack,d=this.plotOffset,f=d.left,p=(d.right,d.bottom,d.top),g=t.mouse.trackDecimals,m=this.options.mouse.container,x=0,v=0;if(u||(u=k.node('<div class="flotr-mouse-value" style="'+c+'"></div>'),this.mouseTrack=u,k.insert(m||this.el,u)),(!g||g<0)&&(g=0),l&&l.toFixed&&(l=l.toFixed(g)),h&&h.toFixed&&(h=h.toFixed(g)),o=t.mouse.trackFormatter({x:l,y:h,series:t.series,index:t.index,nearest:t,fraction:t.fraction}),S.isNull(o)||S.isUndefined(o))k.hide(u);else if(u.innerHTML=o,k.show(u),a){if(i=k.size(u),m&&(x=(e=k.position(this.el)).top,v=e.left),t.mouse.relative)if(s.pie&&s.pie.show){var y=this.plotWidth/2,b=this.plotHeight/2,w=Math.min(this.canvasWidth,this.canvasHeight)*s.pie.sizeRatio/2,M=t.sAngle<t.eAngle?(t.sAngle+t.eAngle)/2:(t.sAngle+t.eAngle+2*Math.PI)/2;n+="bottom:"+(r-p-b-Math.sin(M)*w/2+this.canvasHeight)+"px;top:auto;",n+="left:"+(r+f+y+Math.cos(M)*w/2)+"px;right:auto;"}else n+="top:",/n/.test(a)?n+=x-r+p+t.yaxis.d2p(t.y)-i.height:n+=x+r+p+t.yaxis.d2p(t.y),n+="px;bottom:auto;left:",/w/.test(a)?n+=v-r+f+t.xaxis.d2p(t.x)-i.width:n+=v+r+f+t.xaxis.d2p(t.x),n+="px;right:auto;";else n+="top:","n"==a.charAt(0)?n+=x+r+p:"s"==a.charAt(0)&&(n+=x-r+p+this.plotHeight-i.height),n+="px;bottom:auto;left:","e"==a.charAt(1)?n+=v-r+f+this.plotWidth-i.width:"w"==a.charAt(1)&&(n+=v+r+f),n+="px;right:auto;";u.style.cssText=c+n,t.mouse.relative&&(/[ew]/.test(a)?/ [ns] /.test(a)||(u.style.top=x+p+t.yaxis.d2p(t.y)-k.size(u).height/2+"px"):u.style.left=v+f+t.xaxis.d2p(t.x)-k.size(u).width/2+"px")}}})}(),function(){function c(t,e){return Math.min(Math.max(0,t),e.plotWidth-1)}function u(t,e){return Math.min(Math.max(0,t),e.plotHeight)}Flotr.DOM;var i=Flotr.EventAdapter,s=Flotr._;Flotr.addPlugin("selection",{options:{pinchOnly:null,mode:null,color:"#B6D9FF",fps:20},callbacks:{"flotr:mouseup":function(t){var e=this.options.selection,i=this.selection,o=this.getEventPosition(t);e&&e.mode&&(i.interval&&clearInterval(i.interval),this.multitouches?i.updateSelection():e.pinchOnly||i.setSelectionPos(i.selection.second,o),i.clearSelection(),i.selecting&&i.selectionIsSane()&&(i.drawSelection(),i.fireSelectEvent(),this.ignoreClick=!0))},"flotr:mousedown":function(t){var e,i=this.options.selection,o=this.selection,n=this.getEventPosition(t);i&&i.mode&&(!i.mode||((e=t).which?1!==e.which:0!==e.button&&1!==e.button)&&s.isUndefined(t.touches)||(i.pinchOnly||o.setSelectionPos(o.selection.first,n),o.interval&&clearInterval(o.interval),this.lastMousePos.pageX=null,o.selecting=!1,o.interval=setInterval(s.bind(o.updateSelection,this),1e3/i.fps)))},"flotr:destroy":function(t){clearInterval(this.selection.interval)}},getArea:function(){var t,e,i,o,n=this.selection.selection,s=this.axes;n.first,n.second;return t=s.x.p2d(n.first.x),e=s.x.p2d(n.second.x),i=s.y.p2d(n.first.y),o=s.y.p2d(n.second.y),{x1:Math.min(t,e),y1:Math.min(i,o),x2:Math.max(t,e),y2:Math.max(i,o),xfirst:t,xsecond:e,yfirst:i,ysecond:o}},selection:{first:{x:-1,y:-1},second:{x:-1,y:-1}},prevSelection:null,interval:null,fireSelectEvent:function(t){var e=this.selection.getArea();t=t||"select",e.selection=this.selection.selection,i.fire(this.el,"flotr:"+t,[e,this])},setSelection:function(t,e){var i=this.options,o=this.axes.x,n=this.axes.y,s=n.scale,a=o.scale,r=-1!=i.selection.mode.indexOf("x"),l=-1!=i.selection.mode.indexOf("y"),h=this.selection.selection;this.selection.clearSelection(),h.first.y=u(r&&!l?0:(n.max-t.y1)*s,this),h.second.y=u(r&&!l?this.plotHeight-1:(n.max-t.y2)*s,this),h.first.x=c(l&&!r?0:(t.x1-o.min)*a,this),h.second.x=c(l&&!r?this.plotWidth:(t.x2-o.min)*a,this),this.selection.drawSelection(),e||this.selection.fireSelectEvent()},setSelectionPos:function(t,e){var i=this.options.selection.mode,o=this.selection.selection;-1==i.indexOf("x")?t.x=t==o.first?0:this.plotWidth:t.x=c(e.relX,this),-1==i.indexOf("y")?t.y=t==o.first?0:this.plotHeight-1:t.y=u(e.relY,this)},drawSelection:function(){this.selection.fireSelectEvent("selecting");var t=this.selection.selection,e=this.octx,i=this.options,o=this.plotOffset,n=this.selection.prevSelection;if(!n||t.first.x!=n.first.x||t.first.y!=n.first.y||t.second.x!=n.second.x||t.second.y!=n.second.y){e.save(),e.strokeStyle=this.processColor(i.selection.color,{opacity:.8}),e.lineWidth=1,e.lineJoin="miter",e.fillStyle=this.processColor(i.selection.color,{opacity:.4}),this.selection.prevSelection={first:{x:t.first.x,y:t.first.y},second:{x:t.second.x,y:t.second.y}};var s=Math.min(t.first.x,t.second.x),a=Math.min(t.first.y,t.second.y),r=Math.abs(t.second.x-t.first.x),l=Math.abs(t.second.y-t.first.y);e.fillRect(s+o.left+.5,a+o.top+.5,r,l),e.strokeRect(s+o.left+.5,a+o.top+.5,r,l),e.restore()}},updateSelection:function(){if(this.lastMousePos.pageX){if(this.selection.selecting=!0,this.multitouches)this.selection.setSelectionPos(this.selection.selection.first,this.getEventPosition(this.multitouches[0])),this.selection.setSelectionPos(this.selection.selection.second,this.getEventPosition(this.multitouches[1]));else{if(this.options.selection.pinchOnly)return;this.selection.setSelectionPos(this.selection.selection.second,this.lastMousePos)}this.selection.clearSelection(),this.selection.selectionIsSane()&&this.selection.drawSelection()}},clearSelection:function(){if(this.selection.prevSelection){var t=this.selection.prevSelection,e=this.plotOffset,i=Math.min(t.first.x,t.second.x),o=Math.min(t.first.y,t.second.y),n=Math.abs(t.second.x-t.first.x),s=Math.abs(t.second.y-t.first.y);this.octx.clearRect(i+e.left-1+.5,o+e.top-1,n+2+.5,s+2+.5),this.selection.prevSelection=null}},selectionIsSane:function(){var t=this.selection.selection;return 5<=Math.abs(t.second.x-t.first.x)||5<=Math.abs(t.second.y-t.first.y)}})}(),function(){var d=Flotr.DOM;Flotr.addPlugin("labels",{callbacks:{"flotr:afterdraw":function(){this.labels.draw()}},draw:function(){function t(t,e,i){var o,n=i?e.minorTicks:e.ticks,s=1===e.orientation;e.n;for(o={color:e.options.color||w.grid.color,angle:Flotr.toRad(e.options.labelsAngle),textBaseline:"middle"},b=0;b<n.length&&(i?e.options.showMinorLabels:e.options.showLabels);++b)(v=n[b]).label+="",v.label&&v.label.length&&(x=Math.cos(b*r+h)*a,y=Math.sin(b*r+h)*a,o.textAlign=s?Math.abs(x)<.1?"center":x<0?"right":"left":"left",Flotr.drawText(M,v.label,s?x:3,s?y:-e.ticks[b].v/e.max*(a-w.fontSize),o))}function e(t,e,i,o){var n,s,a,r,l,h,c,u,d,f,p,g=1===e.orientation,m=1===e.n;for(n={color:e.options.color||w.grid.color,textAlign:i,textBaseline:o,angle:Flotr.toRad(e.options.labelsAngle)},n=Flotr.getBestTextAlign(n.angle,n),b=0;b<e.ticks.length&&((p=e).options.showLabels&&p.used);++b)(v=e.ticks[b]).label&&v.label.length&&((s=e.d2p(v.v))<0||s>(g?t.plotWidth:t.plotHeight)||(Flotr.drawText(M,v.label,(u=g,d=m,f=s,(c=t).plotOffset.left+(u?f:d?-w.grid.labelMargin:w.grid.labelMargin+c.plotWidth)),(r=g,l=m,h=s,(a=t).plotOffset.top+(r?w.grid.labelMargin:h)+(r&&l?a.plotHeight:0)),n),g||m||(M.save(),M.strokeStyle=n.color,M.beginPath(),M.moveTo(t.plotOffset.left+t.plotWidth-8,t.plotOffset.top+e.d2p(v.v)),M.lineTo(t.plotOffset.left+t.plotWidth,t.plotOffset.top+e.d2p(v.v)),M.stroke(),M.restore())))}function i(t,e){var i,o,n=1===e.orientation,s=1===e.n,a="",r=t.plotOffset;if(n||s||(M.save(),M.strokeStyle=e.options.color||w.grid.color,M.beginPath()),e.options.showLabels&&(s||e.used))for(b=0;b<e.ticks.length;++b)!(v=e.ticks[b]).label||!v.label.length||(n?r.left:r.top)+e.d2p(v.v)<0||(n?r.left:r.top)+e.d2p(v.v)>(n?t.canvasWidth:t.canvasHeight)||(o=r.top+(n?(s?1:-1)*(t.plotHeight+w.grid.labelMargin):e.d2p(v.v)-e.maxLabel.height/2),i=n?r.left+e.d2p(v.v)-l/2:0,a="",0===b?a=" first":b===e.ticks.length-1&&(a=" last"),a+=n?" flotr-grid-label-x":" flotr-grid-label-y",c+=['<div style="position:absolute; text-align:'+(n?"center":"right")+"; ","top:"+o+"px; ",(n||s?"left:":"right:")+i+"px; ","width:"+(n?l:(s?r.left:r.right)-w.grid.labelMargin)+"px; ",e.options.color?"color:"+e.options.color+"; ":" ",'" class="flotr-grid-label'+a+'">'+v.label+"</div>"].join(" "),n||s||(M.moveTo(r.left+t.plotWidth-8,r.top+e.d2p(v.v)),M.lineTo(r.left+t.plotWidth,r.top+e.d2p(v.v))))}var v,l,a,o,r,h,n,b,c="",s=0,w=this.options,M=this.ctx,u=this.axes;w.fontSize;for(b=0;b<u.x.ticks.length;++b)u.x.ticks[b].label&&++s;l=this.plotWidth/s,w.grid.circular&&(M.save(),M.translate(this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+this.plotHeight/2),a=this.plotHeight*w.radar.radiusRatio/2+w.fontSize,o=this.axes.x.ticks.length,r=Math.PI/o*2,h=-Math.PI/2,t(0,u.x,!1),t(0,u.x,!0),t(0,u.y,!1),t(0,u.y,!0),M.restore()),!w.HtmlText&&this.textEnabled?(e(this,u.x,"center","top"),e(this,u.x2,"center","bottom"),e(this,u.y,"right","middle"),e(this,u.y2,"left","middle")):(u.x.options.showLabels||u.x2.options.showLabels||u.y.options.showLabels||u.y2.options.showLabels)&&!w.grid.circular&&(c="",i(this,u.x),i(this,u.x2),i(this,u.y),i(this,u.y2),M.stroke(),M.restore(),n=d.create("div"),d.setStyles(n,{fontSize:"smaller",color:w.grid.color}),n.className="flotr-labels",d.insert(this.el,n),d.insert(n,c))}})}(),function(){var z=Flotr.DOM,P=Flotr._;Flotr.addPlugin("legend",{options:{show:!0,noColumns:1,labelFormatter:function(t){return t},labelBoxBorderColor:"#CCCCCC",labelBoxWidth:14,labelBoxHeight:10,labelBoxMargin:5,container:null,position:"nw",margin:5,backgroundColor:"#F0F0F0",backgroundOpacity:.85},callbacks:{"flotr:afterinit":function(){this.legend.insertLegend()},"flotr:destroy":function(){var t=this.legend.markup;t&&(this.legend.markup=null,z.remove(t))}},insertLegend:function(){if(this.options.legend.show){var t,e,i,o=this.series,n=this.plotOffset,s=this.options,a=s.legend,r=[],l=!1,h=this.ctx,c=P.filter(o,function(t){return t.label&&!t.hide}).length,u=a.position,d=a.margin,f=a.backgroundOpacity;if(c){var p=a.labelBoxWidth,g=a.labelBoxHeight,m=a.labelBoxMargin,x=n.left+d,v=n.top+d,y=0,b={size:1.1*s.fontSize,color:s.grid.color};for(t=o.length-1;-1<t;--t)o[t].label&&!o[t].hide&&(e=a.labelFormatter(o[t].label),y=Math.max(y,this._text.measureText(e,b).width));var w=Math.round(p+3*m+y),M=Math.round(c*(m+g)+m);if(f||0===f||(f=.1),s.HtmlText||!this.textEnabled||a.container){for(t=0;t<o.length;++t)if(o[t].label&&!o[t].hide){t%a.noColumns==0&&(r.push(l?"</tr><tr>":"<tr>"),l=!0);var k=o[t],S=a.labelBoxWidth,T=a.labelBoxHeight;e=a.labelFormatter(k.label),i="background-color:"+(k.bars&&k.bars.show&&k.bars.fillColor&&k.bars.fill?k.bars.fillColor:k.color)+";",r.push('<td class="flotr-legend-color-box">','<div style="border:1px solid ',a.labelBoxBorderColor,';padding:1px">','<div style="width:',S-1,"px;height:",T-1,"px;border:1px solid ",o[t].color,'">','<div style="width:',S,"px;height:",T,"px;",i,'"></div>',"</div>","</div>","</td>",'<td class="flotr-legend-label">',e,"</td>")}if(l&&r.push("</tr>"),0<r.length){var F='<table style="font-size:smaller;color:'+s.grid.color+'">'+r.join("")+"</table>";if(a.container)F=z.node(F),this.legend.markup=F,z.insert(a.container,F);else{var A={position:"absolute",zIndex:"2",border:"1px solid "+a.labelBoxBorderColor};"n"==u.charAt(0)?(A.top=d+n.top+"px",A.bottom="auto"):"c"==u.charAt(0)?(A.top=d+(this.plotHeight-M)/2+"px",A.bottom="auto"):"s"==u.charAt(0)&&(A.bottom=d+n.bottom+"px",A.top="auto"),"e"==u.charAt(1)?(A.right=d+n.right+"px",A.left="auto"):"w"==u.charAt(1)&&(A.left=d+n.left+"px",A.right="auto");var O=z.create("div");if(O.className="flotr-legend",z.setStyles(O,A),z.insert(O,F),z.insert(this.el,O),!f)return;var C=a.backgroundColor||s.grid.backgroundColor||"#ffffff";P.extend(A,z.size(O),{backgroundColor:C,zIndex:"",border:""}),A.width+="px",A.height+="px",(O=z.create("div")).className="flotr-legend-bg",z.setStyles(O,A),z.opacity(O,f),z.insert(O," "),z.insert(this.el,O)}}}else{"s"==u.charAt(0)&&(v=n.top+this.plotHeight-(d+M)),"c"==u.charAt(0)&&(v=n.top+this.plotHeight/2-(d+M/2)),"e"==u.charAt(1)&&(x=n.left+this.plotWidth-(d+w)),i=this.processColor(a.backgroundColor,{opacity:f}),h.fillStyle=i,h.fillRect(x,v,w,M),h.strokeStyle=a.labelBoxBorderColor,h.strokeRect(Flotr.toPixel(x),Flotr.toPixel(v),w,M);var W=x+m,I=v+m;for(t=0;t<o.length;t++)o[t].label&&!o[t].hide&&(e=a.labelFormatter(o[t].label),h.fillStyle=o[t].color,h.fillRect(W,I,p-1,g-1),h.strokeStyle=a.labelBoxBorderColor,h.lineWidth=1,h.strokeRect(Math.ceil(W)-1.5,Math.ceil(I)-1.5,p+2,g+2),Flotr.drawText(h,e,W+p+m,I+g,b),I+=g+m)}}}}})}(),function(){function c(e){if(this.options.spreadsheet.tickFormatter)return this.options.spreadsheet.tickFormatter(e);var t=d.find(this.axes.x.ticks,function(t){return t.v==e});return t?t.label:e}var u=Flotr.DOM,d=Flotr._;Flotr.addPlugin("spreadsheet",{options:{show:!1,tabGraphLabel:"Graph",tabDataLabel:"Data",toolbarDownload:"Download CSV",toolbarSelectAll:"Select all",csvFileSeparator:",",decimalSeparator:".",tickFormatter:null,initialTab:"graph"},callbacks:{"flotr:afterconstruct":function(){if(this.options.spreadsheet.show){var t,e=this.spreadsheet,i=u.node('<div class="flotr-tabs-group" style="position:absolute;left:0px;width:'+this.canvasWidth+'px"></div>'),o=u.node('<div style="float:left" class="flotr-tab selected">'+this.options.spreadsheet.tabGraphLabel+"</div>"),n=u.node('<div style="float:left" class="flotr-tab">'+this.options.spreadsheet.tabDataLabel+"</div>");e.tabsContainer=i,e.tabs={graph:o,data:n},u.insert(i,o),u.insert(i,n),u.insert(this.el,i),t=u.size(n).height+2,this.plotOffset.bottom+=t,u.setStyles(i,{top:this.canvasHeight-t+"px"}),this.observe(o,"click",function(){e.showTab("graph")}).observe(n,"click",function(){e.showTab("data")}),"graph"!==this.options.spreadsheet.initialTab&&e.showTab(this.options.spreadsheet.initialTab)}}},loadDataGrid:function(){if(this.seriesData)return this.seriesData;var t=this.series,a={};return d.each(t,function(t,s){d.each(t.data,function(t){var e=t[0],i=t[1],o=a[e];if(o)o[s+1]=i;else{var n=[];n[0]=e,n[s+1]=i,a[e]=n}})}),this.seriesData=d.sortBy(a,function(t,e){return parseInt(e,10)}),this.seriesData},constructDataGrid:function(){if(this.spreadsheet.datagrid)return this.spreadsheet.datagrid;var t,e,i,o=this.series,n=this.spreadsheet.loadDataGrid(),s=["<colgroup><col />"],a=['<table class="flotr-datagrid"><tr class="first-row">'];a.push("<th>&nbsp;</th>"),d.each(o,function(t,e){a.push('<th scope="col">'+(t.label||String.fromCharCode(65+e))+"</th>"),s.push("<col />")}),a.push("</tr>"),d.each(n,function(s){a.push("<tr>"),d.times(o.length+1,function(t){var e="td",i=s[t],o=d.isUndefined(i)?"":Math.round(1e5*i)/1e5;if(0===t){e="th";var n=c.call(this,o);n&&(o=n)}a.push("<"+e+("th"==e?' scope="row"':"")+">"+o+"</"+e+">")},this),a.push("</tr>")},this),s.push("</colgroup>"),i=u.node(a.join("")),t=u.node('<button type="button" class="flotr-datagrid-toolbar-button">'+this.options.spreadsheet.toolbarDownload+"</button>"),e=u.node('<button type="button" class="flotr-datagrid-toolbar-button">'+this.options.spreadsheet.toolbarSelectAll+"</button>"),this.observe(t,"click",d.bind(this.spreadsheet.downloadCSV,this)).observe(e,"click",d.bind(this.spreadsheet.selectAllData,this));var r=u.node('<div class="flotr-datagrid-toolbar"></div>');u.insert(r,t),u.insert(r,e);var l=this.canvasHeight-u.size(this.spreadsheet.tabsContainer).height-2,h=u.node('<div class="flotr-datagrid-container" style="position:absolute;left:0px;top:0px;width:'+this.canvasWidth+"px;height:"+l+'px;overflow:auto;z-index:10"></div>');return u.insert(h,r),u.insert(h,i),u.insert(this.el,h),this.spreadsheet.datagrid=i,this.spreadsheet.container=h,i},showTab:function(t){if(this.spreadsheet.activeTab!==t){switch(t){case"graph":u.hide(this.spreadsheet.container),u.removeClass(this.spreadsheet.tabs.data,"selected"),u.addClass(this.spreadsheet.tabs.graph,"selected");break;case"data":this.spreadsheet.datagrid||this.spreadsheet.constructDataGrid(),u.show(this.spreadsheet.container),u.addClass(this.spreadsheet.tabs.data,"selected"),u.removeClass(this.spreadsheet.tabs.graph,"selected");break;default:throw"Illegal tab name: "+t}this.spreadsheet.activeTab=t}},selectAllData:function(){if(this.spreadsheet.tabs){var t,e,i,o,n=this.spreadsheet.constructDataGrid();return this.spreadsheet.showTab("data"),setTimeout(function(){(i=n.ownerDocument)&&(o=i.defaultView)&&o.getSelection&&i.createRange&&(t=window.getSelection())&&t.removeAllRanges?((e=i.createRange()).selectNode(n),t.removeAllRanges(),t.addRange(e)):document.body&&document.body.createTextRange&&(e=document.body.createTextRange())&&(e.moveToElementText(n),e.select())},0),!0}return!1},downloadCSV:function(){var i="",t=this.series,n=this.options,e=this.spreadsheet.loadDataGrid(),s=encodeURIComponent(n.spreadsheet.csvFileSeparator);if(n.spreadsheet.decimalSeparator===n.spreadsheet.csvFileSeparator)throw"The decimal separator is the same as the column separator ("+n.spreadsheet.decimalSeparator+")";d.each(t,function(t,e){i+=s+'"'+(t.label||String.fromCharCode(65+e)).replace(/\"/g,'\\"')+'"'}),i+="%0D%0A",i+=d.reduce(e,function(t,e){var i=c.call(this,e[0])||"";i='"'+(i+"").replace(/\"/g,'\\"')+'"';var o=e.slice(1).join(s);return"."!==n.spreadsheet.decimalSeparator&&(o=o.replace(/\./g,n.spreadsheet.decimalSeparator)),t+i+s+o+"%0D%0A"},"",this),Flotr.isIE&&Flotr.isIE<9?(i=i.replace(new RegExp(s,"g"),decodeURIComponent(s)).replace(/%0A/g,"\n").replace(/%0D/g,"\r"),window.open().document.write(i)):window.open("data:text/csv,"+i)}})}(),function(){var r=Flotr.DOM;Flotr.addPlugin("titles",{callbacks:{"flotr:afterdraw":function(){this.titles.drawTitles()}},drawTitles:function(){var t,e=this.options,i=e.grid.labelMargin,o=this.ctx,n=this.axes;if(!e.HtmlText&&this.textEnabled){var s={size:e.fontSize,color:e.grid.color,textAlign:"center"};e.subtitle&&Flotr.drawText(o,e.subtitle,this.plotOffset.left+this.plotWidth/2,this.titleHeight+this.subtitleHeight-2,s),s.weight=1.5,s.size*=1.5,e.title&&Flotr.drawText(o,e.title,this.plotOffset.left+this.plotWidth/2,this.titleHeight-2,s),s.weight=1.8,s.size*=.8,n.x.options.title&&n.x.used&&(s.textAlign=n.x.options.titleAlign||"center",s.textBaseline="top",s.angle=Flotr.toRad(n.x.options.titleAngle),s=Flotr.getBestTextAlign(s.angle,s),Flotr.drawText(o,n.x.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+n.x.maxLabel.height+this.plotHeight+2*i,s)),n.x2.options.title&&n.x2.used&&(s.textAlign=n.x2.options.titleAlign||"center",s.textBaseline="bottom",s.angle=Flotr.toRad(n.x2.options.titleAngle),s=Flotr.getBestTextAlign(s.angle,s),Flotr.drawText(o,n.x2.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top-n.x2.maxLabel.height-2*i,s)),n.y.options.title&&n.y.used&&(s.textAlign=n.y.options.titleAlign||"right",s.textBaseline="middle",s.angle=Flotr.toRad(n.y.options.titleAngle),s=Flotr.getBestTextAlign(s.angle,s),Flotr.drawText(o,n.y.options.title,this.plotOffset.left-n.y.maxLabel.width-2*i,this.plotOffset.top+this.plotHeight/2,s)),n.y2.options.title&&n.y2.used&&(s.textAlign=n.y2.options.titleAlign||"left",s.textBaseline="middle",s.angle=Flotr.toRad(n.y2.options.titleAngle),s=Flotr.getBestTextAlign(s.angle,s),Flotr.drawText(o,n.y2.options.title,this.plotOffset.left+this.plotWidth+n.y2.maxLabel.width+2*i,this.plotOffset.top+this.plotHeight/2,s))}else{t=[],e.title&&t.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;font-size:1em;font-weight:bold;text-align:center;width:",this.plotWidth,'px;" class="flotr-title">',e.title,"</div>"),e.subtitle&&t.push('<div style="position:absolute;top:',this.titleHeight,"px;left:",this.plotOffset.left,"px;font-size:smaller;text-align:center;width:",this.plotWidth,'px;" class="flotr-subtitle">',e.subtitle,"</div>"),t.push("</div>"),t.push('<div class="flotr-axis-title" style="font-weight:bold;">'),n.x.options.title&&n.x.used&&t.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight+e.grid.labelMargin+n.x.titleSize.height,"px;left:",this.plotOffset.left,"px;width:",this.plotWidth,"px;text-align:",n.x.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x1">',n.x.options.title,"</div>"),n.x2.options.title&&n.x2.used&&t.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;width:",this.plotWidth,"px;text-align:",n.x2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x2">',n.x2.options.title,"</div>"),n.y.options.title&&n.y.used&&t.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-n.y.titleSize.height/2,"px;left:0;text-align:",n.y.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y1">',n.y.options.title,"</div>"),n.y2.options.title&&n.y2.used&&t.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-n.y.titleSize.height/2,"px;right:0;text-align:",n.y2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y2">',n.y2.options.title,"</div>"),t=t.join("");var a=r.create("div");r.setStyles({color:e.grid.color}),a.className="flotr-titles",r.insert(this.el,a),r.insert(a,t)}}})}();